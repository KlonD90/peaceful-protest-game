!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="dist/",e(e.s=314)}([,,,,,,,,function(t,e,i){"use strict";i.d(e,"O",function(){return r}),i.d(e,"N",function(){return s}),i.d(e,"i",function(){return o}),i.d(e,"g",function(){return a}),i.d(e,"e",function(){return n}),i.d(e,"f",function(){return h}),i.d(e,"h",function(){return l}),i.d(e,"b",function(){return u}),i.d(e,"d",function(){return c}),i.d(e,"c",function(){return p}),i.d(e,"a",function(){return d}),i.d(e,"W",function(){return f}),i.d(e,"X",function(){return m}),i.d(e,"V",function(){return g}),i.d(e,"U",function(){return y}),i.d(e,"k",function(){return v}),i.d(e,"j",function(){return b}),i.d(e,"T",function(){return w}),i.d(e,"P",function(){return k}),i.d(e,"R",function(){return z}),i.d(e,"Q",function(){return x}),i.d(e,"S",function(){return T}),i.d(e,"M",function(){return j}),i.d(e,"L",function(){return O}),i.d(e,"K",function(){return P}),i.d(e,"s",function(){return A}),i.d(e,"x",function(){return M}),i.d(e,"A",function(){return C}),i.d(e,"B",function(){return S}),i.d(e,"z",function(){return W}),i.d(e,"y",function(){return _}),i.d(e,"l",function(){return D}),i.d(e,"n",function(){return E}),i.d(e,"m",function(){return N}),i.d(e,"w",function(){return R}),i.d(e,"u",function(){return B}),i.d(e,"t",function(){return F}),i.d(e,"v",function(){return H}),i.d(e,"J",function(){return L}),i.d(e,"H",function(){return I}),i.d(e,"I",function(){return V}),i.d(e,"r",function(){return G}),i.d(e,"o",function(){return U}),i.d(e,"q",function(){return q}),i.d(e,"p",function(){return K}),i.d(e,"F",function(){return J}),i.d(e,"G",function(){return Y}),i.d(e,"C",function(){return X}),i.d(e,"D",function(){return Q}),i.d(e,"E",function(){return Z});var r="ru",s="en",o={top:150,right:50,bottom:50,left:50},a="timeOut",n="playerKilled",h="protestRate",l="win",u="enter",c="wander",p="pursue",d="convoy",f="hide",m="hunt",g="hide",y="drive",v="normal",b="capture",w="wander",k="arrested",z="leave",x="follow",T="nod",j="wander",O="shooting",P="follow",A="gameTitle",M="menuBack",C="menuLevel1",S="menuLevel2",W="menuHowTo",_="menuControls",D="controlsMove",E="controlsRun",N="controlsPoster",R="howToScale",B="howToCheer",F="howToCall",H="howToCops",L="uiScale",I="uiLoading",V="uiPause",G="endWin",U="endArrested",q="endTime",K="endFail",J="statsTime",Y="statsTotal",X="statsActive",Q="statsArrested",Z="statsLeft"},,,,,,function(t,e){var i={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){function i(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function r(t,e){var r=i(t),s=i(e);return r.concat(s.reverse())}function s(t){var e,i,r,s,o,a=0;for(e=1;e<t.length;++e)i=t[e-1],r=t[e],s=i[0]-r[0],o=i[1]-r[1],a+=Math.sqrt(s*s+o*o);return a}function o(t,e,i,r){var s,o,a,n,h,l,u=Math.abs,c=[];for(a=u(i-t),n=u(r-e),s=t<i?1:-1,o=e<r?1:-1,h=a-n;;){if(c.push([t,e]),t===i&&e===r)break;l=2*h,l>-n&&(h-=n,t+=s),l<a&&(h+=a,e+=o)}return c}function a(t){var e,i,r,s,a,n,h=[],l=t.length;if(l<2)return h;for(a=0;a<l-1;++a)for(e=t[a],i=t[a+1],r=o(e[0],e[1],i[0],i[1]),s=r.length,n=0;n<s-1;++n)h.push(r[n]);return h.push(t[l-1]),h}function n(t,e){var i,r,s,a,n,h,l,u,c,p,d,f=e.length,m=e[0][0],g=e[0][1],y=e[f-1][0],v=e[f-1][1];for(i=m,r=g,n=[[i,r]],h=2;h<f;++h){for(u=e[h],s=u[0],a=u[1],c=o(i,r,s,a),d=!1,l=1;l<c.length;++l)if(p=c[l],!t.isWalkableAt(p[0],p[1])){d=!0;break}d&&(lastValidCoord=e[h-1],n.push(lastValidCoord),i=lastValidCoord[0],r=lastValidCoord[1])}return n.push([y,v]),n}function h(t){if(t.length<3)return t;var e,i,r,s,o,a,n=[],h=t[0][0],l=t[0][1],u=t[1][0],c=t[1][1],p=u-h,d=c-l;for(o=Math.sqrt(p*p+d*d),p/=o,d/=o,n.push([h,l]),a=2;a<t.length;a++)e=u,i=c,r=p,s=d,u=t[a][0],c=t[a][1],p=u-e,d=c-i,o=Math.sqrt(p*p+d*d),p/=o,d/=o,p===r&&d===s||n.push([e,i]);return n.push([u,c]),n}e.backtrace=i,e.biBacktrace=r,e.pathLength=s,e.interpolate=o,e.expandPath=a,e.smoothenPath=n,e.compressPath=h},,,,,,,,,function(t,e){t.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var i=Math.SQRT2-1;return t<e?i*t+e:i*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},,,,,,,,,,,function(t,e,i){t.exports=i(365)},function(t,e,i){function r(t){t=t||{},this.heuristic=t.heuristic||a.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}var s=i(62),o=i(42),a=i(51);i(14);r.prototype.findPath=function(t,e,i,r,a){var n,h=this.openList=new s(function(t,e){return t.f-e.f}),l=this.startNode=a.getNodeAt(t,e),u=this.endNode=a.getNodeAt(i,r);for(this.grid=a,l.g=0,l.f=0,h.push(l),l.opened=!0;!h.empty();){if(n=h.pop(),n.closed=!0,n===u)return o.expandPath(o.backtrace(u));this._identifySuccessors(n)}return[]},r.prototype._identifySuccessors=function(t){var e,i,r,s,o,n,h,l,u,c,p=this.grid,d=this.heuristic,f=this.openList,m=this.endNode.x,g=this.endNode.y,y=t.x,v=t.y,b=Math.abs;Math.max;for(e=this._findNeighbors(t),s=0,o=e.length;s<o;++s)if(i=e[s],r=this._jump(i[0],i[1],y,v)){if(n=r[0],h=r[1],c=p.getNodeAt(n,h),c.closed)continue;l=a.octile(b(n-y),b(h-v)),u=t.g+l,(!c.opened||u<c.g)&&(c.g=u,c.h=c.h||d(b(n-m),b(h-g)),c.f=c.g+c.h,c.parent=t,c.opened?f.updateItem(c):(f.push(c),c.opened=!0))}},t.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function r(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=i(89),h=i(8),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(r)},c=function(t){function e(t){var i=t.onDropPoster,a=r(t,["onDropPoster"]);s(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a));return n.injurySprite=n.sprite.addChild(n.game.make.sprite(-15,-n.sprite.height/2-2,"injury")),n.injurySprite.bringToTop(),n.injurySprite.visible=!1,n.posterSprite=n.sprite.addChild(n.game.make.sprite(-10,11,"poster",0)),n.posterSprite.bringToTop(),n.posterSprite.anchor.set(.5,1),n.posterSprite.visible=!1,n.showPoster=!1,n.dropPoster=1,n.onDropPoster=i,n}return a(e,t),l(e,[{key:"update",value:function(){this.injurySprite.visible=1!==this.sprite.health,this.posterSprite.visible=this.posterSprite.alive&&this.showPoster}},{key:"setMode",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case h.P:this.dropPosterRnd(),this.moveTo(null);var r=i.x,s=i.y;this.sprite.x=r,this.sprite.y=s}u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t,i)}},{key:"dropPosterRnd",value:function(){this.game.rnd.frac()<this.dropPoster&&(this.posterSprite.kill(),this.onDropPoster&&this.onDropPoster({x:this.sprite.x,y:this.sprite.y}))}}]),e}(n.a);e.a=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(8),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(){function t(e){var i=e.game,s=e.x,a=e.y,n=e.speed,h=e.spriteKey,l=e.spriteName,u=e.props,c=e.GameObject,p=e.moveTo;r(this,t),this.props=u,this.game=i,this.GameObject=c,this.speed=o({current:n.value},n),this.sprite=this.game.add.sprite(s,a,h,0),this.sprite.mz=this,this.sprite.name=l,this.sprite.anchor.set(.5),this.game.physics.arcade.enable(this.sprite),this.sprite.body.reset(this.sprite.x,this.sprite.y),this.stayingTimer=this.game.time.create(!1),this.mode=null,this.moveTo=p}return a(t,[{key:"update",value:function(){}},{key:"setMode",value:function(t){this.mode=t}},{key:"setSpeed",value:function(t){this.speed.current!==t&&(this.speed.current=t)}},{key:"setVelocity",value:function(t){var e=this.game.math.angleBetweenPoints(this.sprite.body.center,t);this.game.physics.arcade.velocityFromRotation(e,this.speed.current,this.sprite.body.velocity)}},{key:"getNextCoords",value:function(t){var e=[];t||(t={top:this.sprite.y-this.sprite.top+s.i.top,right:this.game.world.width-(this.sprite.right-this.sprite.x),bottom:this.game.world.height-(this.sprite.bottom-this.sprite.y),left:this.sprite.x-this.sprite.left}),this.sprite.x>t.left&&e.push("left"),this.sprite.x<t.right&&e.push("right"),this.sprite.y>t.top&&e.push("top"),this.sprite.y<t.bottom&&e.push("bottom");var i=this.game.rnd.between(0,e.length-1),r=this.sprite.x,o=this.sprite.y;switch(e[i]){case"left":r=this.game.rnd.between(t.left,this.sprite.x-1);break;case"right":r=this.game.rnd.between(this.sprite.x+1,t.right);break;case"top":o=this.game.rnd.between(t.top,this.sprite.y-1);break;case"bottom":o=this.game.rnd.between(this.sprite.y+1,t.bottom)}return{x:Math.round(r),y:Math.round(o)}}},{key:"updateProgressBar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65280;this.progressBar.clear(),0!==(t=this.game.math.clamp(t,0,1))&&(this.progressBar.lineStyle(1,e,1),this.progressBar.drawRect(-12.5,-32.5,25,5),this.progressBar.lineStyle(5,e,1),this.progressBar.moveTo(-12.5,-30),this.progressBar.lineTo(Math.round(25*(-.5+t)),-30))}},{key:"stop",value:function(){this.sprite.body.stop()}},{key:"stopWandering",value:function(){this.moveTo(null),this.stayingTimer.stop(!0)}},{key:"revive",value:function(){this.sprite.revive(1)}},{key:"kill",value:function(){this.mode=null,this.moveTo(null),this.sprite.kill()}}]),t}();e.a=n},function(t,e){function i(t,e,i){this.x=t,this.y=e,this.walkable=void 0===i||i}t.exports=i},function(t,e,i){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var s=i(62),o=i(42),a=i(51),n=i(14);r.prototype.findPath=function(t,e,i,r,a){var n,h,l,u,c,p,d,f,m=new s(function(t,e){return t.f-e.f}),g=a.getNodeAt(t,e),y=a.getNodeAt(i,r),v=this.heuristic,b=this.diagonalMovement,w=this.weight,k=Math.abs,z=Math.SQRT2;for(g.g=0,g.f=0,m.push(g),g.opened=!0;!m.empty();){if(n=m.pop(),n.closed=!0,n===y)return o.backtrace(y);for(h=a.getNeighbors(n,b),u=0,c=h.length;u<c;++u)l=h[u],l.closed||(p=l.x,d=l.y,f=n.g+(p-n.x==0||d-n.y==0?1:z),(!l.opened||f<l.g)&&(l.g=f,l.h=l.h||w*v(k(p-i),k(d-r)),l.f=l.g+l.h,l.parent=n,l.opened?m.updateItem(l):(m.push(l),l.opened=!0)))}return[]},t.exports=r},function(t,e,i){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var s=i(62),o=i(42),a=i(51),n=i(14);r.prototype.findPath=function(t,e,i,r,a){var n,h,l,u,c,p,d,f,m=function(t,e){return t.f-e.f},g=new s(m),y=new s(m),v=a.getNodeAt(t,e),b=a.getNodeAt(i,r),w=this.heuristic,k=this.diagonalMovement,z=this.weight,x=Math.abs,T=Math.SQRT2;for(v.g=0,v.f=0,g.push(v),v.opened=1,b.g=0,b.f=0,y.push(b),b.opened=2;!g.empty()&&!y.empty();){for(n=g.pop(),n.closed=!0,h=a.getNeighbors(n,k),u=0,c=h.length;u<c;++u)if(l=h[u],!l.closed){if(2===l.opened)return o.biBacktrace(n,l);p=l.x,d=l.y,f=n.g+(p-n.x==0||d-n.y==0?1:T),(!l.opened||f<l.g)&&(l.g=f,l.h=l.h||z*w(x(p-i),x(d-r)),l.f=l.g+l.h,l.parent=n,l.opened?g.updateItem(l):(g.push(l),l.opened=1))}for(n=y.pop(),n.closed=!0,h=a.getNeighbors(n,k),u=0,c=h.length;u<c;++u)if(l=h[u],!l.closed){if(1===l.opened)return o.biBacktrace(l,n);p=l.x,d=l.y,f=n.g+(p-n.x==0||d-n.y==0?1:T),(!l.opened||f<l.g)&&(l.g=f,l.h=l.h||z*w(x(p-t),x(d-e)),l.f=l.g+l.h,l.parent=n,l.opened?y.updateItem(l):(y.push(l),l.opened=2))}}return[]},t.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var r={initial:[{type:"spritesheet",key:"langButtons",url:i(316),frameWidth:50,frameHeight:50}],helpTouch:[{type:"spritesheet",key:"helpMove",url:i(317),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"helpRun",url:i(318),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"helpPoster",url:i(319),frameWidth:70,frameHeight:70}],helpDesktop:[{type:"spritesheet",key:"helpMove",url:i(320),frameWidth:150,frameHeight:50},{type:"spritesheet",key:"helpRun",url:i(321),frameWidth:150,frameHeight:50},{type:"spritesheet",key:"helpPoster",url:i(322),frameWidth:250,frameHeight:50}],levelCommon:[{type:"spritesheet",key:"playButton",url:i(323),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"klyaksa",url:i(324),frameWidth:1035,frameHeight:1035},function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({type:"spritesheet",key:"star",url:i(325),frameHeight:30},"frameHeight",30),{type:"spritesheet",key:"repeatButton",url:i(326),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"soundButtons",url:i(327),frameWidth:50,frameHeight:50},{type:"audio",key:"theme",urls:i(328)},{type:"audio",key:"punch01",urls:i(329)},{type:"audio",key:"punch02",urls:i(330)},{type:"audio",key:"applause",urls:i(331)},{type:"audio",key:"boo",urls:i(332)},{type:"audio",key:"croud",urls:i(333)},{type:"audio",key:"scream03",urls:i(334)},{type:"audio",key:"truck",urls:i(335)},{type:"audio",key:"pick",urls:i(336)}],level1:[{type:"spritesheet",key:"border",url:i(125),frameWidth:100,frameHeight:50},{type:"spritesheet",key:"auto",url:i(126),frameWidth:290,frameHeight:135},{type:"spritesheet",key:"cop",url:i(337),frameWidth:44,frameHeight:49},{type:"spritesheet",key:"shield",url:i(127),frameWidth:316,frameHeight:140},{type:"spritesheet",key:"journalist",url:i(128),frameWidth:32,frameHeight:49},{type:"spritesheet",key:"player",url:i(129),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester1",url:i(130),frameWidth:32,frameHeight:48},{type:"spritesheet",key:"protester2",url:i(131),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester3",url:i(132),frameWidth:30,frameHeight:47},{type:"spritesheet",key:"injury",url:i(133),frameWidth:30,frameHeight:31},{type:"spritesheet",key:"poster",url:i(134),frameWidth:60,frameHeight:71},{type:"image",key:"ground",url:i(338),overwrite:!1}],level2:[{type:"spritesheet",key:"border",url:i(125),frameWidth:100,frameHeight:50},{type:"spritesheet",key:"auto",url:i(126),frameWidth:290,frameHeight:135},{type:"spritesheet",key:"cop",url:i(339),frameWidth:46,frameHeight:54},{type:"spritesheet",key:"swat",url:i(340),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"shield",url:i(127),frameWidth:316,frameHeight:140},{type:"spritesheet",key:"journalist",url:i(128),frameWidth:32,frameHeight:49},{type:"spritesheet",key:"player",url:i(129),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester1",url:i(130),frameWidth:32,frameHeight:48},{type:"spritesheet",key:"protester2",url:i(131),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester3",url:i(132),frameWidth:30,frameHeight:47},{type:"spritesheet",key:"injury",url:i(133),frameWidth:30,frameHeight:31},{type:"spritesheet",key:"poster",url:i(134),frameWidth:60,frameHeight:71},{type:"image",key:"ground",url:i(341),overwrite:!1}]};e.a=JSON.stringify(r)},function(t,e,i){t.exports=i.p+"assets/6de19dd8a50184e808601049e3864f02.png"},function(t,e,i){t.exports=i.p+"assets/570cb45ba3589144f3858f3d0385a88d.png"},function(t,e,i){t.exports=i.p+"assets/75acaf7dc3fb09428e30d09953735c10.png"},function(t,e,i){t.exports=i.p+"assets/0db8c7aedd9b6876feb9ee4371b27d14.png"},function(t,e,i){t.exports=i.p+"assets/c73e25fb0b044d025cd031db52c0704b.png"},function(t,e,i){t.exports=i.p+"assets/c319d1c800f4e0f8c49b21f55ef1ee16.png"},function(t,e,i){t.exports=i.p+"assets/51eaa920cd842f906dbb0ab9dafb2046.png"},function(t,e,i){t.exports=i.p+"assets/373325f07721a6c1f012d59948a7b889.png"},function(t,e,i){t.exports=i.p+"assets/d4bedbdde1c2adef9d869553fe67a350.png"},function(t,e,i){t.exports=i.p+"assets/28dbeb6c57f67cd17abbd912371bac9c.png"},function(t,e,i){"use strict";function r(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=i(88),h=i(136),l=i(8),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},c=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),p=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(r)},d=function(t){function e(t){var i=t.fovGroup,a=t.radius,n=t.cheering,l=t.stamina,c=t.staminaCooldown,p=t.powerUp,d=t.powerDown,f=t.slots,m=r(t,["fovGroup","radius","cheering","stamina","staminaCooldown","powerUp","powerDown","slots"]);s(this,e);var g=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({spriteKey:"player",spriteName:"player"},m)));return g.sprite.inputEnabled=!0,g.sprite.input.priorityID=1,g.sprite.body.collideWorldBounds=!0,g.direction=0,g.power=1,g.powerUpValue=p,g.powerDownValue=d,g.powerTimer=g.game.time.create(!1),g.powerTimer.loop(2e3,g.powerDown,g),g.powerTimer.start(),g.cheering=n,g.stamina=l,g.maxStamina=l,g.cooldownTimer=g.game.time.create(!1),g.staminaCooldown=1e3*c,g.tapStartTimestamp=Date.now(),g.tapDelta=1/0,g.progressBar=g.game.add.graphics(),g.sprite.addChild(g.progressBar),g.audioScream=g.game.add.audio("scream03"),g.showPoster=!1,g.isFrozen=!1,g.slots=new h.a(g.sprite,g,f||[{x:-30,y:-30},{x:30,y:30}]),g.radius={initial:a,graphic:0,actual:0,actualSq:0,tween:{}},g.resetRadius(),g.circleGraphics=g.game.add.graphics(0,0),i.add(g.circleGraphics),g.game.onResume.add(g.handleGameResume,g),g.keys={up:g.game.input.keyboard.addKey(Phaser.Keyboard.UP),down:g.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),left:g.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),right:g.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),space:g.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),shift:g.game.input.keyboard.addKey(Phaser.Keyboard.SHIFT)},e.instance=g,g}return a(e,t),c(e,[{key:"update",value:function(){var t=this;if(this.resetRadius(),this.slots.update(),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),this.circleGraphics.clear(),this.mode===l.P||this.isFrozen)return void this.updateProgressBar(0);this.circleGraphics.lineStyle(1,3407667,1),this.circleGraphics.drawCircle(this.sprite.x,this.sprite.y,2*this.radius.graphic);var i=this.speed.value,r=this.keys.up.isDown||this.keys.down.isDown||this.keys.left.isDown||this.keys.right.isDown;if(this.cooldownTimer.running?this.stamina=this.maxStamina*this.cooldownTimer.ms/this.staminaCooldown:r&&this.keys.shift.isDown||this.tapDelta<200?this.stamina>0?(this.stamina-=1,i*=this.speed.running):(this.cooldownTimer.add(this.staminaCooldown,function(){t.cooldownTimer.stop(!0)}),this.cooldownTimer.start()):this.stamina<this.maxStamina&&(this.stamina+=1),this.stamina<this.maxStamina?this.updateProgressBar(this.stamina/this.maxStamina,this.cooldownTimer.running?16711680:65280):this.updateProgressBar(0),this.showPoster&&(i*=this.speed.withPoster),this.setSpeed(i),r){this.moveTo(null);var s=[];this.keys.up.isDown&&s.push(-90),this.keys.down.isDown&&s.push(90),this.keys.left.isDown&&(this.keys.up.isDown?s.push(-180):s.push(180)),this.keys.right.isDown&&s.push(0);var o=s.reduce(function(t,e){return e+t},0)/s.length;this.direction=o,this.game.physics.arcade.velocityFromAngle(o,this.speed.current,this.sprite.body.velocity),this.resetClickSpeed(!0)}else(this.keys.up.justUp||this.keys.down.justUp||this.keys.left.justUp||this.keys.right.justUp)&&this.stop();this.keys.space.justDown&&this.togglePoster()}},{key:"handleGameResume",value:function(){this.moveTo(null)}},{key:"setMode",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case l.P:this.togglePoster(!1),this.sprite.body.collideWorldBounds=!1,this.cooldownTimer.stop(!0)}p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t,i)}},{key:"togglePoster",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.showPoster;t!==this.showPoster&&(t&&this.audioScream.play("",0,.1),this.showPoster=t)}},{key:"powerUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.powerUpValue;0!==t&&this.powerChange(t)}},{key:"powerDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.powerDownValue;Math.max(1,this.power-t)!==this.power&&this.powerChange(-t)}},{key:"powerChange",value:function(t){this.power+=t,this.posterSprite.scale.set(this.power)}},{key:"resetClickSpeed",value:function(t){if(t)this.tapDelta=1/0;else{var e=Date.now();this.tapDelta=e-this.tapStartTimestamp,this.tapStartTimestamp=e}}},{key:"resetRadius",value:function(){var t=this.showPoster?this.radius.initial:0;(t*=this.power)!==this.radius.actual&&(this.radius.tween.isRunning&&this.radius.tween.stop(),this.game.math.fuzzyEqual(t,this.radius.graphic,1)?this.radius.graphic=t:(this.radius.tween=this.game.add.tween(this.radius),this.radius.tween.to({graphic:t},500,Phaser.Easing.Exponential.Out),this.radius.tween.start()),this.radius.actual=t,this.radius.actualSq=Math.pow(this.radius.actual,2))}},{key:"freeze",value:function(){this.sprite.alive&&this.moveTo(null),this.isFrozen=!0}},{key:"kill",value:function(){this.game.onResume.removeAll(),this.powerTimer.stop(!0),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}},{key:"screenAttack",value:function(){}}]),e}(n.a);e.a=d},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(350),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e,i,o){r(this,t),this.slots=o.map(function(t){return new s.a(e,i,t)})}return o(t,[{key:"update",value:function(){this.slots.filter(function(t){return t.taken}).forEach(function(t){return t.update()})}},{key:"take",value:function(t){var e=this.slots.find(function(t){return!t.taken});return e?(e.take(t),e):null}},{key:"hasEmptySlots",value:function(){return!!this.slots.find(function(t){return!t.taken})}},{key:"dismissAll",value:function(){this.slots.forEach(function(t){t.taken&&t.taken.onSlotDismissing&&t.taken.onSlotDismissing(),t.dismiss()})}}]),t}();e.a=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o,a=i(8),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=(o={},s(o,a.k,3816022),s(o,a.j,5651002),o),l=function(){function t(e){var i=e.game,s=e.radius,o=e.angle,a=e.colors,n=void 0===a?h:a;r(this,t),this.game=i,this.radius=s,this.radiusSq=Math.pow(this.radius,2),this.halfViewAngle=this.game.math.degToRad(o/2),this.colors=n,this.graphics=this.game.add.graphics(0,0),this.center=null,this.isActive=!0}return n(t,[{key:"update",value:function(t){var e,i=t.x,r=t.y,s=t.angle,o=t.mode;if(this.center={x:i,y:r},this.angle=s,this.graphics.clear(),this.isActive){var n=this.angle-this.halfViewAngle,h=this.angle+this.halfViewAngle,l=[i+Math.cos(n)*this.radius,r+Math.sin(n)*this.radius];this.graphics.beginFill(this.colors[o||a.k],.4),this.graphics.moveTo(i,r),(e=this.graphics).lineTo.apply(e,l),this.graphics.arc(i,r,this.radius,n,h,!1,10),this.graphics.lineTo(i,r),this.graphics.endFill()}}},{key:"containsPoint",value:function(t){var e=t.x,i=t.y;if(!this.center)return!1;if(this.game.math.distanceSq(this.center.x,this.center.y,e,i)>this.radiusSq)return!1;var r=this.game.math.angleBetweenPoints(this.center,{x:e,y:i}),s=this.angle-this.halfViewAngle,o=this.angle+this.halfViewAngle;return s<=r&&r<=o||(r-=2*Math.PI*Math.sign(r),s<=r&&r<=o)}},{key:"destroy",value:function(){this.graphics.destroy(),this.isActive=!1}},{key:"kill",value:function(){this.graphics.kill(),this.isActive=!1}},{key:"revive",value:function(){this.graphics.revive(),this.isActive=!0}}]),t}();e.a=l},function(t,e,i){"use strict";function r(t){return String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0")}e.a=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(315),s=i(344),o=i(345),a=i(347),n=i(348),h=i(349);setTimeout(function(){var t=window.innerHeight;document.body.clientHeight>t&&(document.body.style.height=t+"px",document.documentElement.style.height=t+"px");var e=document.querySelector(".js-game-container"),i=new Phaser.Game({width:e.clientWidth,height:e.clientHeight,parent:e,antialias:!0,renderer:Phaser.CANVAS});i.state.add("Boot",r.a),i.state.add("Loading",s.a),i.state.add("StartMenu",o.a),i.state.add("Help",a.a),i.state.add("Controls",n.a),i.state.add("Game",h.a),i.state.start("Boot")},50),document.body.style.backgroundImage="url("+i(380)+")"},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(124),o=i(342),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(){function t(){r(this,t)}return a(t,[{key:"init",value:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.mz={}}},{key:"create",value:function(){this.game.mz.i18n=new o.a({game:this.game}),this.state.onStateChange.add(this.handleStateChange,this),this.state.start("Loading",!0,!1,{assets:[["pack","initial",null,s.a],["pack","help"+(Phaser.Device.desktop?"Desktop":"Touch"),null,s.a]],nextState:["StartMenu"]})}},{key:"handleStateChange",value:function(){this.game.mz.i18n.clear()}}]),t}();e.a=n},function(t,e,i){t.exports=i.p+"assets/66dd3dd498c059b331146e5fe01f17dd.png"},function(t,e,i){t.exports=i.p+"assets/3e736cadcb61ec5e4f210df6e7bedd19.png"},function(t,e,i){t.exports=i.p+"assets/0a98a949b4886079723975216652cf49.png"},function(t,e,i){t.exports=i.p+"assets/c96144591ab8112e33935164269d6683.png"},function(t,e,i){t.exports=i.p+"assets/4190e618de11fbf3ae3d41873529b2e0.png"},function(t,e,i){t.exports=i.p+"assets/3eb6c3176371a0f3cc4fc69f68d0daea.png"},function(t,e,i){t.exports=i.p+"assets/fde6591e1dde24e589cfc497a07e708c.png"},function(t,e,i){t.exports=i.p+"assets/784a4a24da47767dec8d65b727fc8383.png"},function(t,e,i){t.exports=i.p+"assets/b6f612c9937d49d43dc479b8f14b27b4.png"},function(t,e,i){t.exports=i.p+"assets/07112e036fb16b9558240ea6abdd0283.png"},function(t,e,i){t.exports=i.p+"assets/414510c3df8e81d30baba58bc049457c.png"},function(t,e,i){t.exports=i.p+"assets/e2ca73497a9d43a9891bdd004f7842b5.png"},function(t,e,i){t.exports=i.p+"assets/31269e05cd13ab095ae3bbb217d2f567.mp3"},function(t,e,i){t.exports=i.p+"assets/0cb89b881decdf87d1ccaba4ae7aaffb.mp3"},function(t,e,i){t.exports=i.p+"assets/dca004f04dec60da50cca8fecc4161f2.mp3"},function(t,e,i){t.exports=i.p+"assets/3745bf01cd4446437f37de7991ad805b.mp3"},function(t,e,i){t.exports=i.p+"assets/52b53826ba253bf501d879893845b5f4.mp3"},function(t,e,i){t.exports=i.p+"assets/15a327358f08be2e673ef27c2e5dcaa1.mp3"},function(t,e,i){t.exports=i.p+"assets/05b4ea2cf7bcddf26622cdaafb40b881.mp3"},function(t,e,i){t.exports=i.p+"assets/b2187268a6f521f79c03adf9bedcf458.mp3"},function(t,e,i){t.exports=i.p+"assets/dd570435d42a0e42441e1fc12af0f4fa.mp3"},function(t,e,i){t.exports=i.p+"assets/d98ae72532ed2e0fe2b7596a57c1cbac.png"},function(t,e,i){t.exports=i.p+"assets/e8369a8e936a5b0fabd5b1b42fed03d5.png"},function(t,e,i){t.exports=i.p+"assets/733d7ab8b793f60f4c77b9d837fa3693.png"},function(t,e,i){t.exports=i.p+"assets/d0797776e88d180a0467e06d6899a8ae.png"},function(t,e,i){t.exports=i.p+"assets/5fee96579fcfd0ddcb7e4d454cf0be76.png"},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(343),o=i(8),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(){function t(e){var i=e.game;r(this,t),this.game=i,this.textObjects=[],this.currentLang=navigator.language===o.O?o.O:o.N,this.translations=s.a}return a(t,[{key:"setLang",value:function(t){var e=this;this.currentLang=t,this.textObjects.forEach(function(t){var i=t.inst,r=t.text;i.setText(e.getTranslation(r))})}},{key:"createText",value:function(t,e,i,r){var s=this.game.add.text(t,e,this.getTranslation(i),r);return this.textObjects.push({inst:s,text:i}),s}},{key:"getTranslation",value:function(t){return this.translations[t][this.currentLang]}},{key:"clear",value:function(){this.textObjects=[]}}]),t}();e.a=n},function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s,o=i(8);e.a=(s={},r(s,o.s,{en:"Peaceful protest",ru:"Мирная акция протеста"}),r(s,o.A,{en:"> Level 01",ru:"> Уровень 01"}),r(s,o.B,{en:"> Level 02",ru:"> Уровень 02"}),r(s,o.z,{en:"How to play?",ru:"Как играть?"}),r(s,o.y,{en:"Controls",ru:"Управление"}),r(s,o.x,{en:"<   Back",ru:"<   Назад"}),r(s,o.l,{en:"move around",ru:"двигаться"}),r(s,o.n,{en:"run",ru:"бегать"}),r(s,o.m,{en:"show poster",ru:"показать плакат"}),r(s,o.w,{en:"Fill the protest scale before your time runs out",ru:"Заполните шкалу протеста на 100%, пока не вышло время"}),r(s,o.u,{en:"Show your poster to people around you to cheer them up",ru:"Показывайте плакат другим людям, чтобы поднять их настроение"}),r(s,o.t,{en:"Show your poster to journalists for several seconds to call out for more people",ru:"Показывайте плакат журналистам несколько секунд, чтобы позвать больше людей"}),r(s,o.v,{en:"Cops will chase you and others for showing posters",ru:"Полицейские вас арестуют, если поймают с плакатом"}),r(s,o.J,{en:"Protest meter",ru:"Шкала протеста"}),r(s,o.H,{en:"Loading",ru:"Загрузка"}),r(s,o.I,{en:"Pause",ru:"Пауза"}),r(s,o.r,{en:"You did it!",ru:"Митинг удался!"}),r(s,o.o,{en:"They got you, pal",ru:"Суши сухари, дружище"}),r(s,o.q,{en:"Time is out!",ru:"Время вышло!"}),r(s,o.p,{en:"You failed :(",ru:"Ты слил протест :("}),r(s,o.F,{en:"Your time",ru:"Время"}),r(s,o.G,{en:"Total protesters",ru:"Всего протестующих"}),r(s,o.C,{en:"Active",ru:"Осталось на митинге"}),r(s,o.D,{en:"Arrested",ru:"Арестовано"}),r(s,o.E,{en:"Left home",ru:"Ушло домой"}),s)},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t){return Array.isArray(t)?t:Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=i(8),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(){o(this,t)}return n(t,[{key:"init",value:function(t){this.mz={config:t,objects:{textProgress:null}}}},{key:"preload",value:function(){var t=this;this.game.stage.backgroundColor="#000",this.mz.config.assets.forEach(function(e){var i,o,a,n=s(e),h=n[0],l=n.slice(1);switch(h){case"pack":(i=t.load).pack.apply(i,r(l));break;case"spritesheet":(o=t.load).spritesheet.apply(o,r(l));break;case"image":(a=t.load).image.apply(a,r(l))}}),this.mz.objects.textLoading=this.game.add.text(this.game.world.centerX-5,this.game.world.centerY,this.game.mz.i18n.getTranslation(a.H),{font:"26px Arial",fill:"#fff"}),this.mz.objects.textLoading.anchor.set(1,.5),this.mz.objects.textProgress=this.game.add.text(this.game.world.centerX+5,this.game.world.centerY,"0 %",{font:"26px Arial",fill:"#fff"}),this.mz.objects.textProgress.anchor.set(0,.5)}},{key:"loadUpdate",value:function(){this.mz.objects.textProgress.setText(this.game.load.progress+" %")}},{key:"create",value:function(){var t;(t=this.state).start.apply(t,r(this.mz.config.nextState))}}]),t}();e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(346),o=i(124),a=i(8),n=function(){function t(t,e){var i=[],r=!0,s=!1,o=void 0;try{for(var a,n=t[Symbol.iterator]();!(r=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function(){function t(){r(this,t)}return h(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000"}},{key:"create",value:function(){var t=this;this.game.world.resize(this.game.width,this.game.height),this.title=this.game.mz.i18n.createText(this.game.width/2,this.game.height/6,a.s,{fill:"#fff"}),this.title.anchor.set(.5);var e=this.game.height/3,i=Math.min(this.game.height/7,70);this.menu=[[a.A,this.handleClickPlay.bind(this,"level1")],[a.B,this.handleClickPlay.bind(this,"level2")],[a.z,this.handleClickHelp.bind(this)],[a.y,this.handleClickControls.bind(this)]].map(function(r,s){var o=n(r,2),a=o[0],h=o[1];return[t.game.mz.i18n.createText(40,s*i+e,a,{font:"22px Arial",fill:"#fff"}),h]}),this.langButton=this.game.add.button(this.game.world.width-10,0,"langButtons",this.handleClickLang.bind(this)),this.langButton.anchor.set(1,0),this.game.input.onDown.add(this.handleClickMenu,this)}},{key:"update",value:function(){this.langButton.frame=this.game.mz.i18n.currentLang===a.O?1:0}},{key:"handleClickPlay",value:function(t){this.state.start("Loading",!0,!1,{assets:[["pack","levelCommon",null,o.a],["pack",t,null,o.a]],nextState:["Game",!0,!1,s.a[t]]})}},{key:"handleClickLang",value:function(){this.game.mz.i18n.setLang(this.game.mz.i18n.currentLang===a.O?a.N:a.O)}},{key:"handleClickMenu",value:function(){var t=this;this.menu.some(function(e){var i=n(e,2),r=i[0],s=i[1];if(r.getBounds().contains(t.game.input.x,t.game.input.y))return t.game.input.onDown.remove(t.handleClickMenu,t),s(),!0})}},{key:"handleClickHelp",value:function(){this.state.start("Help",!0,!1)}},{key:"handleClickControls",value:function(){this.state.start("Controls",!0,!1)}}]),t}();e.a=l},function(t,e,i){"use strict";e.a={level1:{id:"level1",worldWidth:600,worldHeight:600,duration:180,winningThreshold:75,cops:{count:[[60,0],[85,1],[100,2]],speed:{value:50,running:1.7},fov:{distance:150,angle:100}},press:{count:1,speed:{value:50},fov:{distance:150,angle:100},duration:5},protesters:{count:{start:10,max:30,add:8},speed:{value:60},mood:.3,moodUp:.001,moodDown:1e-4,poster:{drop:.3,alive:20}},player:{speed:{value:100,withPoster:.6,running:1.5},radius:120,stamina:100,staminaCooldown:5,powerUp:.1,powerDown:.01}},level2:{id:"level2",worldWidth:800,worldHeight:800,duration:240,winningThreshold:75,cops:{count:[[40,1],[50,2],[60,3],[90,4],[100,5]],speed:{value:60,running:1.8},fov:{distance:150,angle:120}},swat:{count:5,speed:{value:200},frequency:5e3,scoreThreshold:10},press:{count:5,speed:{value:50},fov:{distance:100,angle:100},duration:5},protesters:{count:{start:20,max:60,add:10},max:60,speed:{value:60},mood:.25,moodUp:.002,moodDown:1e-4,poster:{drop:.12,alive:20}},player:{speed:{value:100,withPoster:.6,running:1.5},radius:120,stamina:200,staminaCooldown:5,powerUp:.1,powerDown:.01}}}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(8),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(){r(this,t)}return o(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000"}},{key:"create",value:function(){var t=this,e=this.game.width/15;this.back=this.game.add.text(e,this.game.height/15,this.game.mz.i18n.getTranslation(s.x),{fill:"#fff"});var i=this.game.add.group(),r=0,o=this.game.height/30,a=Math.min(22,Math.round(this.game.height/19));[s.w,s.u,s.t,s.v].forEach(function(s,n){var h=t.game.add.text(e,r,n+1+". "+t.game.mz.i18n.getTranslation(s)+".",{font:a+"px Arial",fill:"#fff",wordWrap:!0,wordWrapWidth:t.game.width-2*e});r+=h.height+o,i.add(h)}),i.y=(this.game.height+this.back.bottom-r+o)/2,this.game.input.onDown.add(this.handleClickBack,this)}},{key:"handleClickBack",value:function(){if(this.back.getBounds().contains(this.game.input.x,this.game.input.y))return this.game.input.onDown.remove(this.handleClickBack,this),this.state.start("StartMenu",!0,!1),!0}}]),t}();e.a=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(8),o=function(){function t(t,e){var i=[],r=!0,s=!1,o=void 0;try{for(var a,n=t[Symbol.iterator]();!(r=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(){function t(){r(this,t)}return a(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000"}},{key:"create",value:function(){var t=this;this.back=this.game.add.text(40,this.game.height/15,this.game.mz.i18n.getTranslation(s.x),{fill:"#fff"});var e=this.game.height/3.4,i=Math.min(100,this.game.height/3.8);[["Move",s.l],["Run",s.n],["Poster",s.m]].forEach(function(r,s){var a=o(r,2),n=a[0],h=a[1];t.game.add.sprite(t.game.width/4,s*i+e,"help"+n).anchor.set(.5),t.game.add.text(t.game.width/2,s*i+e,t.game.mz.i18n.getTranslation(h),{font:"20px Arial",fill:"#fff"}).anchor.set(0,.5)}),this.game.input.onDown.add(this.handleClickBack,this)}},{key:"handleClickBack",value:function(){if(this.back.getBounds().contains(this.game.input.x,this.game.input.y))return this.game.input.onDown.remove(this.handleClickBack,this),this.state.start("StartMenu",!0,!1),!0}}]),t}();e.a=n},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(135),a=i(351),n=i(352),h=i(353),l=i(354),u=i(355),c=i(356),p=i(357),d=i(358),f=i(360),m=i(361),g=i(362),y=i(8),v=i(138),b=i(8),w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},k=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),z=function(){function t(){s(this,t)}return k(t,[{key:"init",value:function(t){window.game=this,this.collider=new g.a({game:this.game,gameObject:this.gameObject,scale:30}),this.mz={level:t,gameEnded:!1,screenAttacked:!1,score:100*(.5*t.protesters.mood+.5*t.protesters.count.start/t.protesters.count.max),timePassed:0,protesters:{alive:0,arrested:0,revived:0,left:0,toRevive:t.protesters.count.start,meanMood:t.protesters.mood},cops:{alive:0},postersToRevive:[],events:{keys:{},fieldClickHandler:null},timers:{swat:null,screen:null,resize:null},objects:{star:null,player:null,swat:null,shield:null,bgTile:null,interface:null,audio:{},pauseMenu:null,endMenu:null,screenAttack:null},arrays:{protesters:[],cops:[],press:[],borders:[],droppedPosters:[]},groups:{d:null,cars:null,droppedPosters:null,copsFOV:null,pressFOV:null,playerFOV:null},zoomLevel:0}}},{key:"create",value:function(){var t=this;this.game.stage.backgroundColor="#ccc",this.game.world.resize(this.mz.level.worldWidth,this.mz.level.worldHeight),this.mz.objects.bgTile=this.game.add.tileSprite(0,0,this.game.width,this.game.height,"ground"),this.mz.objects.bgTile.fixedToCamera=!0,this.mz.objects.audio.theme=this.game.add.audio("theme"),this.mz.objects.audio.theme.loopFull(.1),this.mz.objects.audio.audioPunch=[this.game.add.audio("punch01"),this.game.add.audio("punch02")],this.mz.objects.audio.random=[this.game.add.audio("croud")],this.mz.objects.audio.applause=this.game.add.audio("applause"),this.mz.objects.audio.boo=this.game.add.audio("boo"),this.mz.objects.audio.pick=this.game.add.audio("pick"),this.mz.objects.star=this.createPrefab(l.a,{}),this.mz.groups.playerFOV=this.game.add.group(),this.mz.groups.pressFOV=this.game.add.group(),this.mz.groups.copsFOV=this.game.add.group(),this.mz.groups.droppedPosters=this.game.add.group(),this.mz.groups.cars=this.game.add.group();for(var e=0;e<this.game.world.width;e+=300){var i=this.game.add.sprite(e,120,"auto");i.anchor.set(0,1),this.mz.groups.cars.add(i)}this.mz.groups.d=this.game.add.group(),this.mz.objects.player=this.createPrefab(o.a,w({x:this.game.world.centerX,y:this.game.world.centerY,fovGroup:this.mz.groups.playerFOV},this.mz.level.player,{onDropPoster:this.handleDropPoster.bind(this)})),this.game.camera.follow(this.mz.objects.player.sprite),this.mz.groups.d.add(this.mz.objects.player.sprite);for(var r=0;r<this.game.world.width;r+=100){var s=Math.max(0,50-this.mz.objects.player.sprite.height),a=this.game.add.sprite(r,y.i.top-25,"border",0,this.mz.groups.d);a.anchor.set(0,.5),this.game.physics.arcade.enable(a),a.body.setSize(a.width,s),a.body.immovable=!0,this.mz.arrays.borders.push(a)}this.createCops(),this.mz.timers.screen=this.game.time.create(!1),this.mz.timers.resize=this.game.time.create(!1),this.mz.level.swat&&(this.mz.objects.swat=new u.a(w({game:this.game},this.mz.level.swat,{group:this.mz.groups.d})),this.mz.timers.swat=this.game.time.create(!1)),this.mz.objects.shield=new c.a({game:this.game,speed:{value:300}});for(var n=this.handleFinishShooting.bind(this),p=0;p<this.mz.level.press.count;p++){var m=this.createPrefab(h.a,w({},this.getRandomCoordinates(),{fov:{group:this.mz.groups.pressFOV,distance:this.mz.level.press.fov.distance,angle:this.mz.level.press.fov.angle},speed:this.mz.level.press.speed,shootingDuration:this.mz.level.press.duration,cooldownDuration:this.mz.level.press.duration*this.mz.level.press.count*2,onFinishShooting:n,spriteName:"journalist"+p}));this.mz.arrays.press.push(m.sprite),this.mz.groups.d.add(m.sprite),m.setMode(y.M)}this.createProtesters(),this.mz.objects.interface=new d.a({game:this.game,onTogglePoster:function(){t.mz.objects.player.togglePoster()}});for(var g=0;g<this.game.world.width;g+=100){var v=Math.max(0,50-this.mz.objects.player.sprite.height),b=this.game.add.sprite(g,this.game.world.height-25,"border",0,this.mz.groups.d);b.anchor.set(0,.5),this.game.physics.arcade.enable(b),b.body.setSize(b.width,v,0,b.height-v),b.body.immovable=!0,this.mz.arrays.borders.push(b)}this.mz.objects.timer=this.game.time.create(),this.mz.objects.timer.loop(Phaser.Timer.SECOND,this.updateTimer,this),this.mz.objects.timer.start(),this.mz.objects.pauseMenu=new f.a({game:this.game});var k=this.game.add.sprite(0,0);k.fixedToCamera=!0,k.scale.set(this.game.width,this.game.height),k.inputEnabled=!0,k.input.priorityID=1,k.events.onInputDown.add(this.handleTap,this),this.mz.events.fieldClickHandler=k,this.game.onPause.add(this.handlePause,this),this.game.onResume.add(this.handlePause,this),this.game.input.onDown.add(this.handleUnpause,this),this.mz.events.keys.esc=this.game.input.keyboard.addKey(Phaser.Keyboard.ESC)}},{key:"update",value:function(){var t=this;this.mz.objects.bgTile.tilePosition.set(-this.game.camera.x,-this.game.camera.y),this.collider.update(),this.mz.gameEnded||this.playRandomSound(),this.mz.objects.player.update();var e=this.mz.protesters.meanMood;this.mz.score=0,this.mz.protesters.meanMood=0,this.mz.protesters.alive=0;var i=this.mz.arrays.protesters.filter(function(t){return t.mz.showPoster&&t.mz.isAgitator});this.mz.objects.player.showPoster&&i.push(this.mz.objects.player.sprite);for(var s=0;s<this.mz.arrays.protesters.length;s++){var o=this.mz.arrays.protesters[s];if(o.alive){o.mz.update();var a=!1,n=!0,h=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var p=u.value;if(this.getDistanceSq(o,p)<=this.mz.objects.player.radius.actualSq){a=!0;break}}}catch(t){h=!0,l=t}finally{try{!n&&c.return&&c.return()}finally{if(h)throw l}}o.mz.toggleCheering(!this.mz.gameEnded&&a),this.mz.protesters.alive++,this.mz.protesters.meanMood+=o.mz.mood}else if(0!==this.mz.protesters.toRevive){var d=this.game.math.clamp(e,this.mz.level.protesters.mood,(this.mz.level.winningThreshold-1)/100);this.reviveProtester({sprite:o,mood:d}),this.mz.protesters.alive++,this.mz.protesters.meanMood+=d}}if(this.mz.protesters.toRevive=0,this.mz.protesters.meanMood=0!==this.mz.protesters.alive?this.mz.protesters.meanMood/this.mz.protesters.alive:0,this.mz.score=100*this.game.math.clamp(100*(.5*this.mz.protesters.alive/this.mz.level.protesters.count.max+.5*this.mz.protesters.meanMood)/this.mz.level.winningThreshold,0,1),this.mz.gameEnded||this.mz.objects.interface.update({score:this.mz.score,protestersAlive:this.mz.protesters.alive,protestersTotal:this.mz.level.protesters.count.max,meanMood:this.mz.protesters.meanMood}),this.mz.arrays.press.forEach(function(e){var i=e.mz,r=null;!t.mz.gameEnded&&i.FOV.isActive&&t.mz.objects.player.showPoster&&i.FOV.containsPoint(t.mz.objects.player.sprite.body.center)&&(r=t.mz.objects.player.sprite),r?i.setMode(y.L,{target:r}):i.mode!==y.M&&i.mode!==b.K&&i.setMode(y.M),i.update()}),this.mz.objects.swat&&((this.mz.score>=this.mz.level.swat.scoreThreshold||this.mz.gameEnded)&&this.mz.objects.swat.mode===y.W&&!this.mz.timers.swat.running?(this.mz.timers.swat.add(this.mz.level.swat.frequency,this.launchSWAT,this),this.mz.timers.swat.start()):this.mz.timers.swat.running&&this.mz.score<this.mz.level.swat.scoreThreshold&&this.mz.timers.swat.stop(!0),this.mz.objects.swat.update()),this.mz.objects.shield.update(),this.mz.cops.alive<this.mz.arrays.cops.length){var f=this.getCopsRequiredNumber();f>this.mz.cops.alive&&(this.reviveCops(f-this.mz.cops.alive),this.mz.cops.alive=f)}for(var m=0;m<this.mz.cops.alive;m++){var g=this.mz.arrays.cops[m],v=g.mz;if(v.mode!==y.a&&v.mode!==y.b){v.attractionPoint=w({},this.mz.objects.player.sprite.body.center);var k=0;this.mz.objects.player.showPoster&&(k+=.2,this.mz.arrays.press.forEach(function(t){t.mz.mode===y.L&&(k+=.4)})),v.attractionStrength=Math.min(1,k*this.mz.objects.player.power);for(var z=null,x=1/0,T=0;T<=this.mz.arrays.protesters.length;T++){var j=T===this.mz.arrays.protesters.length?this.mz.objects.player:this.mz.arrays.protesters[T].mz;if(j.sprite.alive&&j.mode!==y.P&&v.FOV.containsPoint(j.sprite.body.center)&&(j.sprite===v.target||j.showPoster)){var O=this.getDistanceSq(g.body.center,j.sprite.body.center);j.sprite===v.target&&(O*=.75),O<x&&(z=j.sprite,x=O)}}z?v.setMode(y.c,{target:z}):v.mode!==y.d&&v.setMode(y.d)}v.update()}var P=[].concat(r(this.mz.arrays.protesters),[this.mz.objects.player.sprite]);this.mz.objects.star&&P.push(this.mz.objects.star.sprite);var A=!0,M=!1,C=void 0;try{for(var S,W=P[Symbol.iterator]();!(A=(S=W.next()).done);A=!0){var _=S.value;if(_.alive&&_.mz.mode!==y.P){for(var D=_.getBounds(),E=0;E<this.mz.arrays.cops.length;E++){var N=this.mz.arrays.cops[E];N.alive&&N.mz.target===_&&Phaser.Rectangle.intersects(D,N.getBounds())&&this.proceedToJail(_,N)}if(this.mz.objects.swat)for(var R=0;R<this.mz.objects.swat.sprites.length;R++){var B=this.mz.objects.swat.sprites[R];0!==B.children.length||B.x<=0||B.x>=this.game.world.width||!Phaser.Rectangle.intersects(D,B.getBounds())||this.arrest(_,B)}this.mz.gameEnded&&this.game.physics.arcade.collide(_,this.mz.objects.shield.sprite,function(e){e.body.collideWorldBounds=!1,1===e.health&&t.beatUpProtester(e),e.mz.dropPosterRnd()})}}}catch(t){M=!0,C=t}finally{try{!A&&W.return&&W.return()}finally{if(M)throw C}}if(this.mz.objects.player.mode!==y.P&&!this.mz.gameEnded)for(var F=0;F<this.mz.arrays.droppedPosters.length;F++){var H=this.mz.arrays.droppedPosters[F];H.sprite.alive&&(Phaser.Rectangle.intersects(H.sprite.getBounds(),this.mz.objects.player.sprite.getBounds())&&(this.mz.objects.audio.pick.play("",0,.25),this.mz.objects.player.powerUp(),H.kill()))}this.game.physics.arcade.collide(this.mz.objects.player.sprite,this.mz.arrays.borders),this.game.physics.arcade.collide(this.mz.objects.player.sprite,this.mz.arrays.protesters),this.game.physics.arcade.collide(this.mz.objects.player.sprite,this.mz.arrays.cops),this.game.physics.arcade.collide(this.mz.arrays.protesters,this.mz.arrays.borders),this.mz.arrays.droppedPosters.forEach(function(t){t.sprite.alive&&t.update()}),this.mz.postersToRevive.forEach(this.createPoster,this),this.mz.postersToRevive=[],this.mz.groups.d.sort("y",Phaser.Group.SORT_ASCENDING),this.mz.gameEnded||this.checkWin(),this.mz.events.keys.esc.justUp&&(this.game.paused=!this.game.paused),this.mz.objects.star&&this.mz.objects.star.update();var L=Math.round(this.mz.protesters.alive/10-.7);if(this.mz.zoomLevel<L){this.mz.zoomLevel=L,this.mz.timers.resize.removeAll(),this.mz.timers.resize.stop();for(var I=Math.round((this.mz.level.worldWidth+10*L*3-this.game.world.width)/10),V=1;V<I+1;V++)this.mz.timers.resize.add(300*V,this.cameraZoom,this);this.mz.timers.resize.start()}}},{key:"render",value:function(){}},{key:"handleTap",value:function(t,e){var i={x:e.x+this.game.camera.x,y:e.y+this.game.camera.y},r=this.mz.objects.player;r.resetClickSpeed(),r.moveTo(i,{callback:function(){return r.resetClickSpeed(!0)}})}},{key:"handleProtesterLeft",value:function(){this.mz.protesters.left++}},{key:"handleDropPoster",value:function(t){this.mz.postersToRevive.push(t)}},{key:"handleFinishShooting",value:function(){this.mz.protesters.toRevive+=this.mz.level.protesters.count.add}},{key:"handlePause",value:function(){this.game.paused?this.mz.objects.pauseMenu.revive():this.mz.objects.pauseMenu.kill()}},{key:"handleUnpause",value:function(){this.game.paused&&this.mz.objects.pauseMenu.replayButton.getBounds().contains(this.game.input.x,this.game.input.y)&&(this.game.paused=!1)}},{key:"updateTimer",value:function(){this.mz.timePassed++,this.mz.objects.interface.updateTimer(v.a(this.mz.level.duration-this.mz.timePassed))}},{key:"createCops",value:function(){var t=this.mz.level.cops.count[this.mz.level.cops.count.length-1][1];this.mz.cops.alive=this.getCopsRequiredNumber();for(var e=0;e<t;e++){var i=this.createPrefab(n.a,w({},this.getRandomCoordinates,{alive:e<this.mz.cops.alive,fov:{group:this.mz.groups.copsFOV,distance:this.mz.level.cops.fov.distance,angle:this.mz.level.cops.fov.angle},speed:this.mz.level.cops.speed,spriteName:"cop"+e}));this.mz.arrays.cops.push(i.sprite),this.mz.groups.d.add(i.sprite),e<this.mz.cops.alive&&i.setMode(y.d)}}},{key:"reviveCops",value:function(t){for(var e=0;e<t;e++){var i=e+this.mz.cops.alive;this.mz.arrays.cops[i].mz.revive(Boolean(i%2))}}},{key:"getCopsRequiredNumber",value:function(){for(var t=0,e=0;e<this.mz.level.cops.count.length;e++)if(this.mz.score<=this.mz.level.cops.count[e][0]){t=this.mz.level.cops.count[e][1];break}return t}},{key:"createProtesters",value:function(){for(var t=this.mz.level.protesters.count.max,e=this.handleDropPoster.bind(this),i=this.handleProtesterLeft.bind(this),r=0;r<t;r++){var s=this.createPrefab(a.a,w({},this.getRandomCoordinates(),{group:this.mz.groups.d,speed:this.mz.level.protesters.speed,spriteKey:"protester"+this.game.rnd.between(1,3),spriteName:"protester"+r,mood:this.mz.level.protesters.mood,moodUp:this.mz.level.protesters.moodUp,moodDown:this.mz.level.protesters.moodDown,dropPoster:this.mz.level.protesters.poster.drop,onLeft:i,onDropPoster:e}));this.mz.arrays.protesters.push(s.sprite)}}},{key:"randomOffscreenCoords",value:function(){var t=this.game.rnd.between(0,100);return{x:0===this.game.rnd.between(0,1)?-100-t:this.game.world.width+100+t,y:this.getRandomCoordinateY()}}},{key:"reviveProtester",value:function(t){var e=t.sprite,i=t.mood;e.mz.revive(w({},this.randomOffscreenCoords(),{nextCoords:this.getRandomCoordinates(),mood:i})),this.mz.protesters.toRevive--,this.mz.protesters.revived++}},{key:"beatUpProtester",value:function(t){t.damage(.1),this.playRandomPunch()}},{key:"createPoster",value:function(t){for(var e=!1,i=0;i<this.mz.arrays.droppedPosters.length;i++){var r=this.mz.arrays.droppedPosters[i];if(!r.sprite.alive){r.revive(t),e=!0;break}}e||this.mz.arrays.droppedPosters.push(new p.a(w({game:this.game,group:this.mz.groups.droppedPosters},t,{alive:this.mz.level.protesters.poster.alive})))}},{key:"proceedToJail",value:function(t,e){var i=this,r=null,s=1/0;this.mz.groups.cars.forEach(function(t){var o={x:(t.right+t.left)/2,y:t.bottom+20},a=i.getDistanceSq(e,o);a<s&&(r=o,s=a)}),this.arrest(t,e),e.mz.setMode(y.a,{jailCoords:r})}},{key:"arrest",value:function(t,e){this.beatUpProtester(t),e.addChild(t),"player"===t.name&&this.game.camera.follow(e),t.mz.setMode(y.P,{x:(0===e.body.velocity.x?this.game.rnd.sign():-Math.sign(e.body.velocity.x))*t.body.halfWidth,y:t.body.halfHeight}),"player"!==t.name&&this.mz.protesters.arrested++}},{key:"launchSWAT",value:function(){this.mz.timers.swat.stop(!0),this.mz.objects.audio.boo.play();var t=0===this.game.rnd.between(0,1)?"ltor":"rtol",e={x:"ltor"===t?-100:this.game.world.width+100,y:this.getRandomCoordinateY()},i=[];if(this.mz.objects.star){var r=this.mz.objects.star.sprite.body.center,s=r.x,o=r.y;i.push({x:s,y:o})}i.push({x:"ltor"===t?this.game.world.width+100:-100,y:this.getRandomCoordinateY()}),this.mz.objects.swat.setMode(y.X,{start:e,targets:i})}},{key:"launchShield",value:function(){this.mz.objects.shield.setMode(y.U,{y:this.game.height/2+this.game.camera.y})}},{key:"checkWin",value:function(){this.mz.timePassed>this.mz.level.duration?this.endGame(y.g):0===this.mz.score?this.endGame(y.f):100===this.mz.score?this.endGame(y.h):this.mz.objects.player.mode!==y.P&&this.mz.objects.player.sprite.alive||this.endGame(y.e)}},{key:"endGame",value:function(t){if(this.mz.gameEnded=!0,this.mz.objects.audio.theme.fadeOut(2e3),this.mz.objects.endMenu=new m.a({game:this.game,mode:t,score:this.mz.objects.interface.score.group,stats:{time:this.mz.timePassed,alive:this.mz.protesters.alive,arrested:this.mz.protesters.arrested,revived:this.mz.protesters.revived,left:this.mz.protesters.left}}),this.game.camera.unfollow(),this.mz.objects.interface.kill(),this.mz.objects.timer.stop(),this.mz.events.fieldClickHandler.kill(),this.game.onPause.removeAll(),this.game.onResume.removeAll(),this.mz.objects.player.freeze(),this.game.input.keyboard.removeKey(Phaser.Keyboard.ESC),this.game.input.onDown.remove(this.handleUnpause,this),t===y.h)this.mz.objects.audio.applause.play("",0,.25),this.mz.arrays.protesters.forEach(function(t){t.mz.moodUp(1)});else switch(this.mz.objects.audio.boo.play(),t){case y.g:this.mz.arrays.protesters.forEach(function(t){t.mz.moodDown(1)}),this.launchShield();break;case y.f:this.launchShield();break;case y.e:}}},{key:"playRandomSound",value:function(){0===this.game.rnd.between(0,1/this.mz.objects.audio.random.length*600)&&this.game.rnd.pick(this.mz.objects.audio.random).play("",0,.25)}},{key:"playRandomPunch",value:function(){this.game.rnd.pick(this.mz.objects.audio.audioPunch).play("",0,.25)}},{key:"getDistanceSq",value:function(t,e){return this.game.math.distanceSq(t.x,t.y,e.x,e.y)}},{key:"getRandomCoordinates",value:function(){return{x:this.getRandomCoordinateX(),y:this.getRandomCoordinateY()}}},{key:"getRandomCoordinateX",value:function(){return this.game.math.clamp(this.game.world.randomX,y.i.left,this.game.world.width-y.i.right)}},{key:"getRandomCoordinateY",value:function(){return this.game.math.clamp(this.game.world.randomY,y.i.top,this.game.world.height-y.i.bottom)}},{key:"screenAttack",value:function(){if(this.mz.screenAttacked){console.log(this.mz.objects.screenAttack),this.mz.objects.screenAttack.alpha=1,this.mz.timers.screen.stop(),this.mz.timers.screen.removeAll(),this.mz.timers.screen.add(5e3,this.screenAttackStop,this);for(var t=0;t<49;t++)this.mz.timers.screen.add(100*(t+1),this.screenAttackAlpha,this);this.mz.timers.screen.start()}else{this.mz.screenAttacked=!0;this.game.camera.width,this.game.camera.height;this.mz.objects.screenAttack=this.game.add.sprite(this.game.camera.width/2-517.5,this.game.camera.height/2-517.5,"klyaksa"),this.mz.objects.screenAttack.fixedToCamera=!0,console.log(this.mz.objects.screenAttack),this.mz.objects.screenAttack.scale.setTo(2.5),this.mz.objects.screenAttack.x=this.game.camera.width/2-this.mz.objects.screenAttack.width/2,this.mz.objects.screenAttack.y=this.game.camera.height/2-this.mz.objects.screenAttack.height/2,console.log("x",this.game.camera.width/2,this.mz.objects.screenAttack.width/2),console.log(this.mz.objects.screenAttack),this.mz.timers.screen.add(5e3,this.screenAttackStop,this);for(var e=0;e<49;e++)this.mz.timers.screen.add(100*(e+1),this.screenAttackAlpha,this);this.mz.timers.screen.start()}}},{key:"screenAttackStop",value:function(){this.mz.objects.screenAttack.destroy(),this.mz.objects.screenAttack=null,this.mz.screenAttacked=!1}},{key:"screenAttackAlpha",value:function(){console.log("attack alpha"),this.mz.objects.screenAttack.alpha-=.005}},{key:"createPrefab",value:function(t,e){var i=this.collider.moveToFactory(),r={game:this.game,GameObject:this,moveTo:i},s=new t(w({},r,e));return this.collider.addEntity({sprite:s.sprite,object:s}),s}},{key:"cameraZoom",value:function(){this.game.camera.scale.x-=.002,this.game.camera.scale.y-=.002,this.game.world.resize(this.game.world.width+10,this.game.world.height+10)}}]),t}();e.a=z},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,i,s){var o=s.x,a=s.y;r(this,t),this.target=e,this.directionObject=i,this.basePoint=new Phaser.Point(o,a),this.taken=null,this.callback=null,this.point={x:e.x,y:e.y},console.log("constructor slot",this),this.update()}return s(t,[{key:"update",value:function(){var t=this.basePoint,e=this.target,i=e.x,r=e.y;if(this.point=Phaser.Point.rotate(new Phaser.Point(i+t.x,r+t.y),i,r,this.directionObject.direction,!0),Number.isNaN(this.x)||Number.isNaN(this.y))throw new Error("Slot mathematics error")}},{key:"take",value:function(t){this.update(),this.taken=t}},{key:"dismiss",value:function(){this.taken=null}},{key:"x",get:function(){return this.point.x}},{key:"y",get:function(){return this.point.y}},{key:"follow",get:function(){return!0}}]),t}();e.a=o},function(t,e,i){"use strict";function r(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=i(88),h=i(135),l=i(8),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),c=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(r)},p=function(t){function e(t){var i=t.group,a=t.mood,n=t.moodDown,h=t.moodUp,l=t.dropPoster,u=t.onLeft,c=r(t,["group","mood","moodDown","moodUp","dropPoster","onLeft"]);s(this,e);var p=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c));return p.group=i,p.group.add(p.sprite),p.progressBar=p.game.add.graphics(),p.sprite.addChild(p.progressBar),p.leavingTimer=p.game.time.create(!1),p.mood=1,p.initialMood=a,p.moodUpValue=h,p.moodDownValue=n,p.dropPoster=l,p.isBeingCheeredUp=!1,p.onLeft=u,p.isFollower=!0,p.isFollowing=!1,p.isNOD=!p.isFollower&&Math.random()<.05,p.isAgitator=!p.isFollower&&!p.isNOD&&Math.random()<.1,p.nodDone=!1,p.slot=null,p.kill(),p}return a(e,t),u(e,[{key:"update",value:function(){if(0!==this.mood||this.leavingTimer.running||this.mode!==l.T?this.mood>0&&this.leavingTimer.running&&this.leavingTimer.stop(!0):(this.leavingTimer.add(this.game.rnd.between(1e3,5e3),this.leave,this),this.leavingTimer.start()),this.mood>0&&this.mode===l.R&&!this.nodDone&&this.setMode(l.T),this.mode===l.S&&this.nodDone&&this.setMode(l.R),this.isFollowing||(this.isBeingCheeredUp?this.isNOD?this.nodDone||this.mode==l.S||this.setMode(l.S):(this.updateProgressBar(this.mood),this.moodUp(this.moodUpValue)):this.mood<.75&&(this.moodDown(this.moodDownValue),this.updateProgressBar(0))),this.showPoster=this.mode!==l.P&&this.mood>=.75&&!this.isNOD,this.showPoster&&this.isFollower)if(this.following)this.following.target===h.a.instance.sprite&&(this.showPoster=h.a.instance.showPoster);else{var t=h.a.instance.slots.take(this);t&&this.setMode(l.Q,{slot:t})}if(this.sprite.tint=16777215,this.mood>=.75){var i=(this.mood-.75)/.25*.25;this.sprite.tint=Phaser.Color.RGBArrayToHex([1-i,1,1-i])}else if(this.mood<=.25){var r=.25*(1-this.mood/.25);this.sprite.tint=Phaser.Color.RGBArrayToHex([1,1-r,1-r])}c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"handleLeft",value:function(){this.onLeft(),this.kill()}},{key:"setMode",value:function(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(console.log(t),t){case l.T:this.mode===l.R&&this.moveTo(null);var s=r.coords;s?this.moveTo(s,{callback:function(){return i.wander()}}):this.wander();break;case l.Q:this.mode===l.T&&this.stopWandering();var o=r.slot;this.following=o,this.moveTo(o,{follow:!0});break;case l.P:this.dismissSlotsTaken(),this.mode===l.T&&this.stopWandering();break;case l.S:this.mode===l.T&&this.stopWandering(),console.log(this.GameObject),this.moveTo(this.GameObject.mz.objects.player.sprite,{callback:function(){i.nodDone=!0,i.GameObject.screenAttack(),i.moveTo(null)}});break;case l.R:this.mode===l.T&&this.stopWandering();var a=this.sprite.x<this.game.world.width/2?-100:this.game.world.width+100,n=this.sprite.y;this.moveTo({x:a,y:n},{callback:function(){return i.handleLeft()},shouldStop:function(t,e){var i=t.sprite.body.center;return Math.abs(e.x-i.x)+Math.abs(e.y-i.y)<5}})}console.log(this),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t,r)}},{key:"wander",value:function(){var t=this;0===this.game.rnd.between(0,10)?this.moveTo(this.getNextCoords(),{callback:function(){return t.wander()}}):(this.stayingTimer.stop(!0),this.stayingTimer.add(this.game.rnd.between(3e3,6e3),this.wander,this),this.stayingTimer.start())}},{key:"leave",value:function(){this.setMode(l.R),this.leavingTimer.stop(!0)}},{key:"toggleCheering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isBeingCheeredUp;t!==this.isBeingCheeredUp&&(this.isBeingCheeredUp=t)}},{key:"moodUp",value:function(t){this.mood=Math.min(this.mood+t,1)}},{key:"moodDown",value:function(t){this.mood=Math.max(this.mood-t,0)}},{key:"revive",value:function(t){var i=t.x,r=t.y,s=t.nextCoords,o=t.mood,a=void 0===o?this.initialMood:o;this.sprite.x=i,this.sprite.y=r,this.sprite.body.reset(i,r),this.posterSprite.revive(),this.mood=a,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revive",this).call(this),this.setMode(l.T,{coords:s})}},{key:"reset",value:function(){this.dismissSlotsTaken(),this.isFollower=!0,this.isNOD=!this.isFollower&&Math.random()<.05,this.isAgitator=!this.isFollower&&!this.isNOD&&Math.random()<.1,this.nodDone=!1,this.slot=null}},{key:"kill",value:function(){this.group.add(this.sprite),this.stopWandering(),this.reset(),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}},{key:"dismissSlotsTaken",value:function(){this.following&&(this.following.dismiss(),this.following=null)}},{key:"onSlotDismissing",value:function(){this.following=null,this.setMode(l.T)}}]),e}(n.a);e.a=p},function(t,e,i){"use strict";function r(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=i(89),h=i(137),l=i(8),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},c=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),p=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(r)},d=function(t){function e(t){var i=t.alive,a=t.fov,n=t.x,l=void 0===n?0:n,c=t.y,p=void 0===c?0:c,d=r(t,["alive","fov","x","y"]);s(this,e);var f=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({x:l,y:p,spriteKey:"cop"},d)));return f.FOV=new h.a({game:f.game,radius:a.distance,angle:a.angle}),a.group.add(f.FOV.graphics),f.target=null,f.attractionPoint=null,f.attractionStrength=0,f.returnCoords=null,i||f.kill(),f}return a(e,t),c(e,[{key:"update",value:function(){var t=this.speed.value;this.mode!==l.c&&this.mode!==l.b||(t*=this.speed.running),this.setSpeed(t),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),this.FOV.update({x:this.sprite.x,y:this.sprite.y,angle:this.sprite.body.angle,mode:this.mode===l.c?l.j:l.k})}},{key:"setMode",value:function(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case l.d:var s=r.coords;this.mode===l.c?this.target=null:this.mode===l.a&&(this.target=null,this.returnCoords=null,this.FOV.revive()),s?this.moveTo(s,{callback:function(){return i.wander()}}):this.wander();break;case l.c:var o=r.target;this.mode===l.d&&this.stopWandering(),this.target=o,this.moveTo(o);break;case l.a:var a=r.jailCoords;this.FOV.kill(),this.returnCoords={x:this.sprite.x,y:this.sprite.y},this.moveTo(a,{callback:function(){return i.handleCovoyEnd()}});break;case l.b:var n=r.coords;this.moveTo(n[0]);var h=function(){i.FOV.revive(),i.setMode(l.d)};this.moveTo(n[1],{callback:h,reset:!1})}p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t)}},{key:"handleCovoyEnd",value:function(){for(var t=0;t<this.sprite.children.length;t++)this.sprite.getChildAt(t).mz.kill();this.setMode(l.d,{coords:this.returnCoords})}},{key:"wander",value:function(){var t=this;0!==(this.attractionStrength>0?1:this.game.rnd.between(0,2))?this.moveTo(this.getNextCoords(),{callback:function(){return t.wander()}}):(this.stayingTimer.stop(!0),this.stayingTimer.add(this.game.rnd.between(1e3,3e3),this.wander,this),this.stayingTimer.start())}},{key:"getNextCoords",value:function(){var t=void 0,i=this.game.rnd.frac();(1===this.attractionStrength||this.attractionStrength>0&&i<=this.attractionStrength)&&(t={top:Math.min(this.sprite.y,this.attractionPoint.y),right:Math.max(this.sprite.x,this.attractionPoint.x),bottom:Math.max(this.sprite.y,this.attractionPoint.y),left:Math.min(this.sprite.x,this.attractionPoint.x)});var r=p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getNextCoords",this).call(this,t);return console.log(r),r}},{key:"revive",value:function(t){var i=this.game.rnd.between(50,200),r=t?-i:this.game.world.width+i,s=110;this.sprite.x=r,this.sprite.y=s,this.sprite.body.reset(r,s);var o=100*this.game.rnd.between(1,Math.floor(this.game.world.width/100)-1);this.setMode(l.b,{coords:[{x:o,y:s},{x:o,y:s+this.sprite.height}]}),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revive",this).call(this)}},{key:"kill",value:function(){this.target=null,this.stopWandering(),this.FOV.kill(),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}}]),e}(n.a);e.a=d},function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=i(89),l=i(137),u=i(8),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},p=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),d=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(r)},f=function(t){function e(t){var i,n=t.fov,h=t.shootingDuration,p=t.cooldownDuration,d=t.onFinishShooting,f=s(t,["fov","shootingDuration","cooldownDuration","onFinishShooting"]);o(this,e);var m=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c({spriteKey:"journalist"},f)));return m.FOV=new l.a({game:m.game,radius:n.distance,angle:n.angle,colors:(i={},r(i,u.k,14540253),r(i,u.j,16777215),i)}),n.group.add(m.FOV.graphics),m.progressBar=m.game.add.graphics(),m.sprite.addChild(m.progressBar),m.shootingTimer=m.game.time.create(!1),m.shootingDuration=1e3*h,m.cooldownTimer=m.game.time.create(!1),m.cooldownDuration=1e3*p,m.onFinishShooting=d,m.target=null,m.following=null,m}return n(e,t),p(e,[{key:"update",value:function(){this.mode===u.L&&this.turnTo(this.target),this.shootingTimer.running?this.updateProgressBar(this.shootingTimer.ms/this.shootingDuration):this.cooldownTimer.running?this.updateProgressBar(this.cooldownTimer.ms/this.cooldownDuration,16711680):this.updateProgressBar(0),this.FOV.update({x:this.sprite.x,y:this.sprite.y,angle:this.sprite.body.angle,mode:this.mode===u.L?u.j:u.k})}},{key:"setMode",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case u.M:this.mode===u.L&&(this.target=null,this.shootingTimer.stop(!0)),this.wander();break;case u.L:var r=i.target;if(this.mode===u.L&&this.target===r)break;this.mode===u.M&&this.stopWandering(),this.target=r,this.shootingTimer.add(this.shootingDuration,this.shootingTimerCallback,this),this.shootingTimer.start();break;case u.K:this.mode===u.M&&this.stopWandering();var s=i.slot;this.following=s,this.moveTo(s,{follow:!0})}d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t)}},{key:"wander",value:function(){var t=this;0!==this.game.rnd.between(0,2)?this.moveTo(this.getNextCoords(),{callback:function(){return t.wander()}}):(this.stayingTimer.stop(!0),this.stayingTimer.add(this.game.rnd.between(1e3,3e3),this.wander,this),this.stayingTimer.start())}},{key:"turnTo",value:function(t){var e=t.x,i=t.y;this.sprite.body.angle=this.game.math.angleBetweenPoints(this.sprite,{x:e,y:i})}},{key:"shootingTimerCallback",value:function(){this.onFinishShooting(),this.FOV.kill(),this.setMode(u.M),this.shootingTimer.stop(!0),this.cooldownTimer.add(this.cooldownDuration,this.cooldownTimerCallback,this),this.cooldownTimer.start()}},{key:"cooldownTimerCallback",value:function(){this.FOV.revive(),this.cooldownTimer.stop(!0)}},{key:"kill",value:function(){this.cooldownTimer.stop(!0),this.shootingTimer.stop(!0),this.stopWandering(),this.FOV.kill(),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}}]),e}(h.a);e.a=f},function(t,e,i){"use strict";function r(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e,i,r,s,o){var a=Math.PI/2*3,n=e,h=i,l=Math.PI/r;t.moveTo(e,i-s);for(var u=0;u<r;u++)n=e+Math.cos(a)*s,h=i+Math.sin(a)*s,t.lineTo(n,h),a+=l,n=e+Math.cos(a)*o,h=i+Math.sin(a)*o,t.lineTo(n,h),a+=l;t.lineTo(e,i-s)}var h=i(88),l=i(136),u=i(8),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},p=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),d=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(r)},f={interval:1,agitation:{duration:10,direction:0,slots:[{x:10,y:10},{x:10,y:-10},{x:20,y:-20}]},speed:100},m=function(t){function e(t){var i=t.config,a=t.GameObject,n=r(t,["config","GameObject"]);s(this,e),console.log(c({config:i,GameObject:a},n));var h=c({},f,i);console.log(n);var l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c({},a.getRandomCoordinates(),{spriteKey:"protester1",spriteName:"star",speed:{value:h.speed}},n,{GameObject:a})));return l.starGraphic=l.game.add.graphics(),l.sprite.addChild(l.starGraphic),l.config=h,l.restTimer=l.game.time.create(!1),l.kill(),l}return a(e,t),p(e,[{key:"setState",value:function(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case e.STATE.REST:this.state={type:e.STATE.REST},this.restTimer.add(1e3*this.config.interval,function(){return i.setState(e.STATE.MOVE_IN)},this),this.restTimer.start();break;case e.STATE.MOVE_IN:this.restTimer.stop(),this.revive(),this.moveTo(this.GameObject.getRandomCoordinates(),{callback:function(){return i.setState(e.STATE.AGITATE)}}),this.state={type:e.STATE.MOVE_IN};break;case e.STATE.AGITATE:var s=this.config.agitation,o=s.slots,a=(s.duration,s.direction);this.direction=a,this.moveTo();var n=new l.a(this.sprite,this,o);this.state={type:e.STATE.AGITATE,slots:n};break;case e.STATE.ARRESTED:var h=this.config.agitation;h.slots,h.duration,h.direction;this.moveTo(),this.state={type:e.STATE.ARRESTED};var u=r.x,c=r.y;this.sprite.x=u,this.sprite.y=c}}},{key:"update",value:function(){switch(this.state.type){case e.STATE.AGITATE:for(var t=this.GameObject.mz.arrays.protesters.filter(function(t){return t.alive}).map(function(t){return t.mz}).filter(function(t){return t.mode===u.T});this.state.slots.hasEmptySlots()&&t.length>0;){var i=t.shift(),r=this.state.slots.take(i);i.setMode(u.Q,{slot:r})}}this.updateStarGraphic(),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"updateStarGraphic",value:function(){this.starGraphic.clear(),this.starGraphic.lineStyle(3,16776960,1),n(this.starGraphic,0,0,5,30,15)}},{key:"revive",value:function(){var t=this.GameObject.randomOffscreenCoords(),e=t.x,i=t.y;this.sprite.revive(1),this.sprite.x=e,this.sprite.y=i,this.sprite.body.reset(e,i)}},{key:"kill",value:function(){this.setState(e.STATE.REST),this.moveTo(null),this.sprite.kill()}}]),e}(h.a);m.STATE={REST:"rest",MOVE_IN:"moveIn",AGITATE:"agitate",ARRESTED:u.P},e.a=m},function(t,e,i){"use strict";function r(t){return Array.isArray(t)?t:Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(8),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(e){var i=e.game,r=e.count,n=e.speed,h=e.group;s(this,t),this.game=i,this.speed=a({current:n.value},n),this.mode=o.W,this.moveTarget=null,this.updateIndex=0,this.sprites=[];for(var l=0;l<r;l++){var u=this.game.add.sprite(-100,-100,"swat",0);u.anchor.set(.5),u.visible=!1,this.game.physics.arcade.enable(u),this.sprites.push(u),h.add(u)}}return n(t,[{key:"update",value:function(){if(this.mode===o.X){var t=this.sprites[this.sprites.length-1];if(this.game.math.fuzzyEqual(this.game.math.distanceSq(t.x,t.y,this.moveTargets[0].x,this.moveTargets[0].y),0,t.width))this.moveTargets.shift(),0===this.moveTargets.length?this.setMode(o.W):this.update();else{var e=r(this.moveTargets),i=e[0];e.slice(1);if(this.updateIndex%30==0){var s=this.sprites[0],a=this.game.math.angleBetweenPoints(s,i)+(0===this.updateIndex?1:-1)*this.game.rnd.realInRange(0,.4);this.game.physics.arcade.velocityFromRotation(a,this.speed.current,s.body.velocity)}for(var n=1;n<this.sprites.length;n++){var h=this.sprites[n],l=this.game.math.angleBetweenPoints(h,this.sprites[n-1]);this.game.physics.arcade.velocityFromRotation(l,this.speed.current,h.body.velocity)}59===this.updateIndex?this.updateIndex=0:this.updateIndex++}}}},{key:"setMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case o.W:if(this.mode===o.X){for(var i=0;i<this.sprites.length;i++){for(var s=0;s<this.sprites[i].children.length;s++)this.sprites[i].getChildAt(s).mz.kill();this.sprites[i].removeChildren(),this.sprites[i].visible=!1,this.sprites[i].body.stop()}this.updateIndex=0,this.moveTargets=[]}break;case o.X:if(this.mode===o.W){var a=e.start,n=e.targets,h=a.x,l=a.y;this.moveTargets=n;for(var u=r(n),c=u[0],p=(u.slice(1),c.x>h?-1:1),d=0;d<this.sprites.length;d++){var f=this.sprites[d];f.x=h+d*p*40,f.y=l,f.visible=!0}}}this.mode=t}}]),t}();e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(8),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n={ltr:"ltr",rtl:"rtl"},h=function(){function t(e){var i=e.game,a=e.speed;r(this,t),this.game=i,this.speed=o({current:a.value},a),this.mode=s.V,this.sprite=this.game.add.sprite(2*this.game.world.width,this.game.world.height/2+this.game.camera.y,"shield"),this.sprite.anchor.set(.5),this.sprite.exist=!1,this.game.physics.arcade.enable(this.sprite),this.sprite.body.immovable=!0,this.direction=n.rtl,this.audio=this.game.add.audio("truck")}return a(t,[{key:"update",value:function(){this.mode===s.U&&(this.direction===n.ltr&&this.sprite.x>=this.game.world.width+this.sprite.width||this.direction===n.rtl&&this.sprite.x<=-this.sprite.width)&&this.setMode(s.V)}},{key:"setMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case s.V:this.mode===s.U&&(this.direction=this.direction===n.ltr?n.rtl:n.ltr,this.sprite.kill(),this.sprite.body.stop(),this.audio.stop());break;case s.U:if(this.mode===s.V){var i=e.y;this.sprite.x=this.direction===n.ltr?-this.game.world.width:2*this.game.world.width,this.sprite.y=i,this.sprite.body.velocity.x=this.speed.current*(this.direction===n.ltr?1:-1),this.sprite.scale.x=this.sprite.scale.y*(this.direction===n.ltr?-1:1),this.audio.loopFull(.25),this.game.camera.shake(.005,3e3)}}this.mode=t}}]),t}();e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){var i=e.game,s=e.group,o=e.x,a=e.y,n=e.alive;r(this,t),this.game=i,this.aliveTime=1e3*n,this.sprite=this.game.add.sprite(o,a,"poster",0,s),this.sprite.anchor.set(.5),this.sprite.rotation=this.game.rnd.sign()*Math.PI/3,this.livingTimer=this.game.time.create(!1),this.dyingTimer=this.game.time.create(!1),this.launchLivingTimer()}return s(t,[{key:"update",value:function(){this.dyingTimer.running&&(this.sprite.alpha=Math.floor(this.dyingTimer.ms/400)%2)}},{key:"handleLivingTimer",value:function(){this.dyingTimer.add(this.aliveTime/4,this.kill,this),this.dyingTimer.start()}},{key:"launchLivingTimer",value:function(){this.livingTimer.add(3*this.aliveTime/4,this.handleLivingTimer,this),this.livingTimer.start()}},{key:"revive",value:function(t){this.sprite.x=t.x,this.sprite.y=t.y,this.sprite.alpha=1,this.launchLivingTimer(),this.sprite.revive()}},{key:"kill",value:function(){this.livingTimer.stop(!0),this.dyingTimer.stop(!0),this.sprite.kill()}}]),t}();e.a=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(359),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e){var i=e.game,o=e.onTogglePoster;r(this,t),this.game=i,this.onTogglePoster=o,this.group=this.game.add.group(),this.group.fixedToCamera=!0,this.score=new s.a({game:this.game,x:this.game.width/2,y:this.game.height-20,width:Math.min(this.game.width/2,250)}),this.group.add(this.score.group),this.textTimer=this.game.add.text(this.game.width-20,20,"",{font:"25px Arial",fill:"#fff"}),this.textTimer.anchor.set(1,0),this.textTimer.setShadow(2,2,"rgba(0, 0, 0, .8)",0),this.group.add(this.textTimer),this.buttonSound=this.game.add.button(10,10,"soundButtons",this.handleClickSound,this,1,1,1,1,this.group),this.buttonSound.input.priorityID=2,Phaser.Device.desktop||(this.buttonPoster=this.game.add.button(this.game.width-20,this.game.height-20,"helpPoster",this.handleTogglePoster,this,1,1,1,1,this.group),this.buttonPoster.anchor.set(1,1),this.buttonPoster.input.priorityID=2)}return o(t,[{key:"update",value:function(t){var e=t.score,i=t.protestersAlive,r=t.protestersTotal,s=t.meanMood;this.buttonSound.frame=this.game.sound.mute?1:0,this.score.update({score:e,protestersAlive:i,protestersTotal:r,mood:100*s})}},{key:"updateTimer",value:function(t){this.textTimer.setText(t)}},{key:"handleClickSound",value:function(){this.game.sound.mute=!this.game.sound.mute}},{key:"handleTogglePoster",value:function(){this.onTogglePoster()}},{key:"kill",value:function(){this.group.killAll()}}]),t}();e.a=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(8),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e){var i=e.game,o=e.x,a=e.y,n=e.width;r(this,t),this.game=i,this.group=this.game.add.group(),this.group.x=o,this.group.y=a,this.width=n,this.scoreMeter=this.game.add.graphics(),this.group.add(this.scoreMeter),this.moodMeter=this.game.add.graphics(),this.group.add(this.moodMeter),this.aliveMeter=this.game.add.graphics(),this.group.add(this.aliveMeter),this.label=this.game.add.text(-this.width/2+20,-8,this.game.mz.i18n.getTranslation(s.J),{font:"12px Arial",fill:"#000",align:"right"}),this.group.add(this.label)}return o(t,[{key:"update",value:function(t){var e=t.score,i=t.mood,r=t.protestersAlive,s=t.protestersTotal;this.updateScoreMeter(e),this.updateAliveMeter(r,s),this.updateMoodMeter(i)}},{key:"updateScoreMeter",value:function(t){this.updateMeter({graphics:this.scoreMeter,value:t,width:this.width,height:16,x:-this.width/2,y:0,colorThreshold:30})}},{key:"updateAliveMeter",value:function(t,e){this.updateMeter({graphics:this.aliveMeter,value:100*t/e,width:this.width/2-1,height:6,x:-this.width/2,y:13,colorThreshold:50})}},{key:"updateMoodMeter",value:function(t){this.updateMeter({graphics:this.moodMeter,value:t,width:this.width/2-1,height:6,x:1,y:13,colorThreshold:50})}},{key:"updateMeter",value:function(t){var e=t.graphics,i=t.value,r=t.width,s=t.height,o=t.x,a=t.y,n=t.colorThreshold;e.clear();var h=Phaser.Color.RGBArrayToHex([this.game.math.clamp(1+(n-i)/(100-n),0,1),this.game.math.clamp(i/n,0,1),0]);e.lineStyle(s,16777215,.9),e.moveTo(o,a),e.lineTo(o+r,a),e.lineStyle(s,h,1),e.moveTo(o,a),e.lineTo(o+Math.round(r*i/100),a)}}]),t}();e.a=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(8),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e){var i=e.game;r(this,t),this.game=i,this.sprite=this.game.add.sprite(0,0),this.overlay=this.game.add.graphics(0,0),this.overlay.beginFill(16777215,.7),this.overlay.drawRect(0,0,this.game.width,this.game.height),this.overlay.endFill(),this.title=this.game.add.text(this.game.width/2,2/3*this.game.height/2,this.game.mz.i18n.getTranslation(s.I)),this.title.anchor.set(.5),this.replayButton=this.game.add.sprite(this.game.width/2,this.game.height/2,"playButton"),this.replayButton.anchor.set(.5),this.sprite.addChild(this.overlay),this.sprite.addChild(this.title),this.sprite.addChild(this.replayButton),this.sprite.fixedToCamera=!0,this.kill()}return o(t,[{key:"kill",value:function(){this.sprite.kill()}},{key:"revive",value:function(){this.sprite.revive()}}]),t}();e.a=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(8),o=i(138),a=function(){function t(t,e){var i=[],r=!0,s=!1,o=void 0;try{for(var a,n=t[Symbol.iterator]();!(r=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=1500,l=3e3,u=function(){function t(e){var i=e.game,s=e.mode,o=e.score,a=e.stats;r(this,t),this.game=i,this.mode=s,this.stats=a;var n=this.game.height/6;this.sprite=this.game.add.sprite(0,0),this.sprite.fixedToCamera=!0,this.topStripe=this.game.add.graphics(0,0),this.topStripe.beginFill(0),this.topStripe.drawRect(0,-n,this.game.width,n),this.topStripe.endFill(),this.game.add.tween(this.topStripe).to({top:n},h).start().onComplete.addOnce(this.handleTweenComplete,this),this.bottomStripe=this.game.add.graphics(0,0),this.bottomStripe.beginFill(0),this.bottomStripe.drawRect(0,this.game.height,this.game.width,this.game.height+n),this.bottomStripe.endFill(),this.game.add.tween(this.bottomStripe).to({top:-n},h).start(),this.overlay=this.game.add.graphics(0,0),this.overlay.beginFill(0),this.overlay.drawRect(0,0,this.game.width,this.game.height),this.overlay.endFill(),this.overlay.alpha=0,this.game.add.tween(this.overlay).to({alpha:.5},l).start().onComplete.addOnce(this.showStats,this),this.replayButton=this.game.add.button(this.game.width-50,50,"repeatButton",this.handleClickPlay,this),this.replayButton.anchor.set(.5),this.replayButton.visible=!1,this.sprite.addChild(this.topStripe),this.sprite.addChild(this.bottomStripe),this.sprite.addChild(this.overlay),this.sprite.addChild(this.replayButton),this.sprite.addChild(o)}return n(t,[{key:"handleTweenComplete",value:function(){this.replayButton.visible=!0}},{key:"handleClickPlay",value:function(){this.game.state.start("StartMenu")}},{key:"showStats",value:function(){var t=this,e="";this.mode===s.h?e=s.r:this.mode===s.e?e=s.o:this.mode===s.g?e=s.q:this.mode===s.f&&(e=s.p);var i=this.game.width/15,r=this.game.add.text(i,40,this.game.mz.i18n.getTranslation(e),{font:"26px Arial",fill:this.mode===s.h?"#393":"#933",wordWrap:!0,wordWrapWidth:this.replayButton.left-2*i});this.sprite.addChild(r);var n=[[s.G,this.stats.revived],[s.C,this.stats.alive],[s.D,this.stats.arrested],[s.E,this.stats.left]];this.mode!==s.g&&n.unshift([s.F,String(o.a(this.stats.time))]);var h=r.bottom+r.top,l=0;n.forEach(function(e,r){var s=a(e,1),o=s[0],n=t.game.add.text(i,40*r+h,t.game.mz.i18n.getTranslation(o)+":",{font:"24px Arial",fill:"#fff"});n.width>l&&(l=n.width),t.sprite.addChild(n)}),l+=2*i,n.forEach(function(e,i){var r=a(e,2),s=(r[0],r[1]),o=t.game.add.text(l,40*i+h,String(s),{font:"24px Arial",fill:"#fff"});t.sprite.addChild(o)})}}]),t}();e.a=u},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!e)return null;var i=l(e,2),r=i[0],s=i[1];return t[r][s]}function a(t,e,i){if(e){var r=l(e,2),s=r[0],o=r[1];t[s][o]=i}}var n=i(363),h=i.n(n),l=function(){function t(t,e){var i=[],r=!0,s=!1,o=void 0;try{for(var a,n=t[Symbol.iterator]();!(r=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),c=function(){function t(e){var i=e.game,r=e.gameObject,o=e.scale;s(this,t),Object.assign(this,{game:i,gameObject:r,scale:o,entities:[]})}return u(t,[{key:"addEntity",value:function(t){var e=t.sprite,i=t.object,r=[];this.entities.push({sprite:e,object:i,move:r})}},{key:"moveEntity",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.callback,s=void 0===r?function(){}:r,o=i.follow,a=void 0!==o&&o,n=i.reset,h=void 0===n||n,l=this.entities.find(function(e){return e.object===t});if(!l&&e)throw new Error("object not registered ("+t+")");l&&(h&&(l.move=[]),e&&l.move.push({target:e,callback:s,follow:a}))}},{key:"moveToFactory",value:function(){var t=this;return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.callback,s=i.follow,o=i.reset;t.moveEntity(this,e,{callback:r,follow:s,reset:o})}}},{key:"onPhaserCollision",value:function(){}},{key:"update",value:function(){var t=this,e=this.getMatrix();this.entities.forEach(function(i){var r=i.move,s=i.sprite,a=i.object;if(0===r.length)return void s.body.stop();var n=t.rCoordsToMCoords(s.body.center),l=t.rCoordsToMCoords(r[0].target),u=new h.a.AStarFinder({allowDiagonal:!0}),c=t._findPath(u,n,l,e);if(c[2]||!1===o(e,c[1])){var p=t.mCoordsToRCoords(c[1]);t.invokeRawMoving(a,p)}else{if(r[0].follow)return void s.body.stop();r[0].callback&&r[0].callback(),r.shift()}})}},{key:"rCoordsToMCoords",value:function(t){var e=t.x,i=t.y;return[this._rCoordToMCoord(e,this.game.world.width),this._rCoordToMCoord(i,this.game.world.height)]}},{key:"_rCoordToMCoord",value:function(t,e){var i=t;return i<0?i=0:i>e&&(i=e),Math.floor(i/this.scale)+1}},{key:"mCoordsToRCoords",value:function(t){var e=l(t,2),i=e[0],r=e[1];return{x:this._mCoordToRCoord(i),y:this._mCoordToRCoord(r)}}},{key:"_mCoordToRCoord",value:function(t){return(t-.5)*this.scale}},{key:"_findPath",value:function(t,e,i,s){var n=!!o(s,e),l=!!o(s,i);a(s,e,!1),a(s,i,!1);var u=new h.a.Grid(s),c=t.findPath.apply(t,r(e).concat(r(i),[u]));return a(s,e,n),a(s,i,l),c}},{key:"getMatrix",value:function(){for(var t=this.rCoordsToMCoords({x:1/0,y:1/0}),e=l(t,2),i=e[0],r=e[1],s=[],o=0;o<=i;o++){s[o]=[];for(var n=0;n<=r;n++)s[o][n]=!1}var h=!0,u=!1,c=void 0;try{for(var p,d=this.entities[Symbol.iterator]();!(h=(p=d.next()).done);h=!0){var f=p.value,m=f.sprite,g=m.body.center,y=g.x,v=g.y;a(s,this.rCoordsToMCoords({x:y,y:v}),!0),a(s,this.rCoordsToMCoords({x:y+1,y:v}),!0),a(s,this.rCoordsToMCoords({x:y-11,y:v}),!0),a(s,this.rCoordsToMCoords({x:y,y:v-1}),!0),a(s,this.rCoordsToMCoords({x:y,y:v+1}),!0)}}catch(t){u=!0,c=t}finally{try{!h&&d.return&&d.return()}finally{if(u)throw c}}return s}},{key:"invokeRawMoving",value:function(t,e){t.setVelocity(e)}}]),t}();e.a=c},function(t,e,i){t.exports=i(364)},function(t,e,i){t.exports={Heap:i(62),Node:i(90),Grid:i(367),Util:i(42),DiagonalMovement:i(14),Heuristic:i(51),AStarFinder:i(91),BestFirstFinder:i(368),BreadthFirstFinder:i(369),DijkstraFinder:i(370),BiAStarFinder:i(92),BiBestFirstFinder:i(371),BiBreadthFirstFinder:i(372),BiDijkstraFinder:i(373),IDAStarFinder:i(374),JumpPointFinder:i(375)}},function(t,e,i){(function(t){(function(){var e,i,r,s,o,a,n,h,l,u,c,p,d,f,m;r=Math.floor,u=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},l=function(t,e,s,o,a){var n;if(null==s&&(s=0),null==a&&(a=i),s<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);s<o;)n=r((s+o)/2),a(e,t[n])<0?o=n:s=n+1;return[].splice.apply(t,[s,s-s].concat(e)),e},a=function(t,e,r){return null==r&&(r=i),t.push(e),f(t,0,t.length-1,r)},o=function(t,e){var r,s;return null==e&&(e=i),r=t.pop(),t.length?(s=t[0],t[0]=r,m(t,0,e)):s=r,s},h=function(t,e,r){var s;return null==r&&(r=i),s=t[0],t[0]=e,m(t,0,r),s},n=function(t,e,r){var s;return null==r&&(r=i),t.length&&r(t[0],e)<0&&(s=[t[0],e],e=s[0],t[0]=s[1],m(t,0,r)),e},s=function(t,e){var s,o,a,n,h,l;for(null==e&&(e=i),n=function(){l=[];for(var e=0,i=r(t.length/2);0<=i?e<i:e>i;0<=i?e++:e--)l.push(e);return l}.apply(this).reverse(),h=[],o=0,a=n.length;o<a;o++)s=n[o],h.push(m(t,s,e));return h},d=function(t,e,r){var s;if(null==r&&(r=i),-1!==(s=t.indexOf(e)))return f(t,0,s,r),m(t,s,r)},c=function(t,e,r){var o,a,h,l,u;if(null==r&&(r=i),a=t.slice(0,e),!a.length)return a;for(s(a,r),u=t.slice(e),h=0,l=u.length;h<l;h++)o=u[h],n(a,o,r);return a.sort(r).reverse()},p=function(t,e,r){var a,n,h,c,p,d,f,m,g;if(null==r&&(r=i),10*e<=t.length){if(h=t.slice(0,e).sort(r),!h.length)return h;for(n=h[h.length-1],f=t.slice(e),c=0,d=f.length;c<d;c++)a=f[c],r(a,n)<0&&(l(h,a,0,null,r),h.pop(),n=h[h.length-1]);return h}for(s(t,r),g=[],p=0,m=u(e,t.length);0<=m?p<m:p>m;0<=m?++p:--p)g.push(o(t,r));return g},f=function(t,e,r,s){var o,a,n;for(null==s&&(s=i),o=t[r];r>e&&(n=r-1>>1,a=t[n],s(o,a)<0);)t[r]=a,r=n;return t[r]=o},m=function(t,e,r){var s,o,a,n,h;for(null==r&&(r=i),o=t.length,h=e,a=t[e],s=2*e+1;s<o;)n=s+1,n<o&&!(r(t[s],t[n])<0)&&(s=n),t[e]=t[s],e=s,s=2*e+1;return t[e]=a,f(t,h,e,r)},e=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.push=a,t.pop=o,t.replace=h,t.pushpop=n,t.heapify=s,t.updateItem=d,t.nlargest=c,t.nsmallest=p,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return h(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return n(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return s(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return d(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(void 0!==t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)}).call(e,i(366)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){function r(t,e,i){var r;"object"!=typeof t?r=t:(e=t.length,r=t[0].length,i=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,i)}var s=i(90),o=i(14);r.prototype._buildNodes=function(t,e,i){var r,o,a=new Array(e);for(r=0;r<e;++r)for(a[r]=new Array(t),o=0;o<t;++o)a[r][o]=new s(o,r);if(void 0===i)return a;if(i.length!==e||i[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(o=0;o<t;++o)i[r][o]&&(a[r][o].walkable=!1);return a},r.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},r.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},r.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},r.prototype.setWalkableAt=function(t,e,i){this.nodes[e][t].walkable=i},r.prototype.getNeighbors=function(t,e){var i=t.x,r=t.y,s=[],a=!1,n=!1,h=!1,l=!1,u=!1,c=!1,p=!1,d=!1,f=this.nodes;if(this.isWalkableAt(i,r-1)&&(s.push(f[r-1][i]),a=!0),this.isWalkableAt(i+1,r)&&(s.push(f[r][i+1]),h=!0),this.isWalkableAt(i,r+1)&&(s.push(f[r+1][i]),u=!0),this.isWalkableAt(i-1,r)&&(s.push(f[r][i-1]),p=!0),e===o.Never)return s;if(e===o.OnlyWhenNoObstacles)n=p&&a,l=a&&h,c=h&&u,d=u&&p;else if(e===o.IfAtMostOneObstacle)n=p||a,l=a||h,c=h||u,d=u||p;else{if(e!==o.Always)throw new Error("Incorrect value of diagonalMovement");n=!0,l=!0,c=!0,d=!0}return n&&this.isWalkableAt(i-1,r-1)&&s.push(f[r-1][i-1]),l&&this.isWalkableAt(i+1,r-1)&&s.push(f[r-1][i+1]),c&&this.isWalkableAt(i+1,r+1)&&s.push(f[r+1][i+1]),d&&this.isWalkableAt(i-1,r+1)&&s.push(f[r+1][i-1]),s},r.prototype.clone=function(){var t,e,i=this.width,o=this.height,a=this.nodes,n=new r(i,o),h=new Array(o);for(t=0;t<o;++t)for(h[t]=new Array(i),e=0;e<i;++e)h[t][e]=new s(e,t,a[t][e].walkable);return n.nodes=h,n},t.exports=r},function(t,e,i){function r(t){s.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}var s=i(91);r.prototype=new s,r.prototype.constructor=r,t.exports=r},function(t,e,i){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var s=i(42),o=i(14);r.prototype.findPath=function(t,e,i,r,o){var a,n,h,l,u,c=[],p=this.diagonalMovement,d=o.getNodeAt(t,e),f=o.getNodeAt(i,r);for(c.push(d),d.opened=!0;c.length;){if(h=c.shift(),h.closed=!0,h===f)return s.backtrace(f);for(a=o.getNeighbors(h,p),l=0,u=a.length;l<u;++l)n=a[l],n.closed||n.opened||(c.push(n),n.opened=!0,n.parent=h)}return[]},t.exports=r},function(t,e,i){function r(t){s.call(this,t),this.heuristic=function(t,e){return 0}}var s=i(91);r.prototype=new s,r.prototype.constructor=r,t.exports=r},function(t,e,i){function r(t){s.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}var s=i(92);r.prototype=new s,r.prototype.constructor=r,t.exports=r},function(t,e,i){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var s=i(42),o=i(14);r.prototype.findPath=function(t,e,i,r,o){var a,n,h,l,u,c=o.getNodeAt(t,e),p=o.getNodeAt(i,r),d=[],f=[],m=this.diagonalMovement;for(d.push(c),c.opened=!0,c.by=0,f.push(p),p.opened=!0,p.by=1;d.length&&f.length;){for(h=d.shift(),h.closed=!0,a=o.getNeighbors(h,m),l=0,u=a.length;l<u;++l)if(n=a[l],!n.closed)if(n.opened){if(1===n.by)return s.biBacktrace(h,n)}else d.push(n),n.parent=h,n.opened=!0,n.by=0;for(h=f.shift(),h.closed=!0,a=o.getNeighbors(h,m),l=0,u=a.length;l<u;++l)if(n=a[l],!n.closed)if(n.opened){if(0===n.by)return s.biBacktrace(n,h)}else f.push(n),n.parent=h,n.opened=!0,n.by=1}return[]},t.exports=r},function(t,e,i){function r(t){s.call(this,t),this.heuristic=function(t,e){return 0}}var s=i(92);r.prototype=new s,r.prototype.constructor=r,t.exports=r},function(t,e,i){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||s.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||s.manhattan:this.heuristic=t.heuristic||s.octile}var s=(i(42),i(51)),o=i(90),a=i(14);r.prototype.findPath=function(t,e,i,r,s){var a,n,h,l=0,u=(new Date).getTime(),c=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),p=function(t,e){return t.x===e.x||t.y===e.y?1:Math.SQRT2},d=function(t,e,i,r,a){if(l++,this.timeLimit>0&&(new Date).getTime()-u>1e3*this.timeLimit)return 1/0;var n=e+c(t,m)*this.weight;if(n>i)return n;if(t==m)return r[a]=[t.x,t.y],t;var h,f,g,y,v=s.getNeighbors(t,this.diagonalMovement);for(g=0,h=1/0;y=v[g];++g){if(this.trackRecursion&&(y.retainCount=y.retainCount+1||1,!0!==y.tested&&(y.tested=!0)),(f=d(y,e+p(t,y),i,r,a+1))instanceof o)return r[a]=[t.x,t.y],f;this.trackRecursion&&0==--y.retainCount&&(y.tested=!1),f<h&&(h=f)}return h}.bind(this),f=s.getNodeAt(t,e),m=s.getNodeAt(i,r),g=c(f,m);for(a=0;!0;++a){if(n=[],(h=d(f,0,g,n,0))===1/0)return[];if(h instanceof o)return n;g=h}return[]},t.exports=r},function(t,e,i){function r(t){return t=t||{},t.diagonalMovement===s.Never?new o(t):t.diagonalMovement===s.Always?new a(t):t.diagonalMovement===s.OnlyWhenNoObstacles?new n(t):new h(t)}var s=i(14),o=i(376),a=i(377),n=i(378),h=i(379);t.exports=r},function(t,e,i){function r(t){s.call(this,t)}var s=i(63),o=i(14);r.prototype=new s,r.prototype.constructor=r,r.prototype._jump=function(t,e,i,r){var s=this.grid,o=t-i,a=e-r;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o){if(s.isWalkableAt(t,e-1)&&!s.isWalkableAt(t-o,e-1)||s.isWalkableAt(t,e+1)&&!s.isWalkableAt(t-o,e+1))return[t,e]}else{if(0===a)throw new Error("Only horizontal and vertical movements are allowed");if(s.isWalkableAt(t-1,e)&&!s.isWalkableAt(t-1,e-a)||s.isWalkableAt(t+1,e)&&!s.isWalkableAt(t+1,e-a))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,i,r,s,a,n,h,l,u=t.parent,c=t.x,p=t.y,d=this.grid,f=[];if(u)e=u.x,i=u.y,r=(c-e)/Math.max(Math.abs(c-e),1),s=(p-i)/Math.max(Math.abs(p-i),1),0!==r?(d.isWalkableAt(c,p-1)&&f.push([c,p-1]),d.isWalkableAt(c,p+1)&&f.push([c,p+1]),d.isWalkableAt(c+r,p)&&f.push([c+r,p])):0!==s&&(d.isWalkableAt(c-1,p)&&f.push([c-1,p]),d.isWalkableAt(c+1,p)&&f.push([c+1,p]),d.isWalkableAt(c,p+s)&&f.push([c,p+s]));else for(a=d.getNeighbors(t,o.Never),h=0,l=a.length;h<l;++h)n=a[h],f.push([n.x,n.y]);return f},t.exports=r},function(t,e,i){function r(t){s.call(this,t)}var s=i(63),o=i(14);r.prototype=new s,r.prototype.constructor=r,r.prototype._jump=function(t,e,i,r){var s=this.grid,o=t-i,a=e-r;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(s.isWalkableAt(t-o,e+a)&&!s.isWalkableAt(t-o,e)||s.isWalkableAt(t+o,e-a)&&!s.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(s.isWalkableAt(t+o,e+1)&&!s.isWalkableAt(t,e+1)||s.isWalkableAt(t+o,e-1)&&!s.isWalkableAt(t,e-1))return[t,e]}else if(s.isWalkableAt(t+1,e+a)&&!s.isWalkableAt(t+1,e)||s.isWalkableAt(t-1,e+a)&&!s.isWalkableAt(t-1,e))return[t,e];return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,i,r,s,a,n,h,l,u=t.parent,c=t.x,p=t.y,d=this.grid,f=[];if(u)e=u.x,i=u.y,r=(c-e)/Math.max(Math.abs(c-e),1),s=(p-i)/Math.max(Math.abs(p-i),1),0!==r&&0!==s?(d.isWalkableAt(c,p+s)&&f.push([c,p+s]),d.isWalkableAt(c+r,p)&&f.push([c+r,p]),d.isWalkableAt(c+r,p+s)&&f.push([c+r,p+s]),d.isWalkableAt(c-r,p)||f.push([c-r,p+s]),d.isWalkableAt(c,p-s)||f.push([c+r,p-s])):0===r?(d.isWalkableAt(c,p+s)&&f.push([c,p+s]),d.isWalkableAt(c+1,p)||f.push([c+1,p+s]),d.isWalkableAt(c-1,p)||f.push([c-1,p+s])):(d.isWalkableAt(c+r,p)&&f.push([c+r,p]),d.isWalkableAt(c,p+1)||f.push([c+r,p+1]),d.isWalkableAt(c,p-1)||f.push([c+r,p-1]));else for(a=d.getNeighbors(t,o.Always),h=0,l=a.length;h<l;++h)n=a[h],f.push([n.x,n.y]);return f},t.exports=r},function(t,e,i){function r(t){s.call(this,t)}var s=i(63),o=i(14);r.prototype=new s,r.prototype.constructor=r,r.prototype._jump=function(t,e,i,r){var s=this.grid,o=t-i,a=e-r;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(s.isWalkableAt(t,e-1)&&!s.isWalkableAt(t-o,e-1)||s.isWalkableAt(t,e+1)&&!s.isWalkableAt(t-o,e+1))return[t,e]}else if(0!==a&&(s.isWalkableAt(t-1,e)&&!s.isWalkableAt(t-1,e-a)||s.isWalkableAt(t+1,e)&&!s.isWalkableAt(t+1,e-a)))return[t,e];return s.isWalkableAt(t+o,e)&&s.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,i,r,s,a,n,h,l,u=t.parent,c=t.x,p=t.y,d=this.grid,f=[];if(u)if(e=u.x,i=u.y,r=(c-e)/Math.max(Math.abs(c-e),1),s=(p-i)/Math.max(Math.abs(p-i),1),0!==r&&0!==s)d.isWalkableAt(c,p+s)&&f.push([c,p+s]),d.isWalkableAt(c+r,p)&&f.push([c+r,p]),d.isWalkableAt(c,p+s)&&d.isWalkableAt(c+r,p)&&f.push([c+r,p+s]);else{var m;if(0!==r){m=d.isWalkableAt(c+r,p);var g=d.isWalkableAt(c,p+1),y=d.isWalkableAt(c,p-1);m&&(f.push([c+r,p]),g&&f.push([c+r,p+1]),y&&f.push([c+r,p-1])),g&&f.push([c,p+1]),y&&f.push([c,p-1])}else if(0!==s){m=d.isWalkableAt(c,p+s);var v=d.isWalkableAt(c+1,p),b=d.isWalkableAt(c-1,p);m&&(f.push([c,p+s]),v&&f.push([c+1,p+s]),b&&f.push([c-1,p+s])),v&&f.push([c+1,p]),b&&f.push([c-1,p])}}else for(a=d.getNeighbors(t,o.OnlyWhenNoObstacles),h=0,l=a.length;h<l;++h)n=a[h],f.push([n.x,n.y]);return f},t.exports=r},function(t,e,i){function r(t){s.call(this,t)}var s=i(63),o=i(14);r.prototype=new s,r.prototype.constructor=r,r.prototype._jump=function(t,e,i,r){var s=this.grid,o=t-i,a=e-r;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(s.isWalkableAt(t-o,e+a)&&!s.isWalkableAt(t-o,e)||s.isWalkableAt(t+o,e-a)&&!s.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(s.isWalkableAt(t+o,e+1)&&!s.isWalkableAt(t,e+1)||s.isWalkableAt(t+o,e-1)&&!s.isWalkableAt(t,e-1))return[t,e]}else if(s.isWalkableAt(t+1,e+a)&&!s.isWalkableAt(t+1,e)||s.isWalkableAt(t-1,e+a)&&!s.isWalkableAt(t-1,e))return[t,e];return s.isWalkableAt(t+o,e)||s.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,i,r,s,a,n,h,l,u=t.parent,c=t.x,p=t.y,d=this.grid,f=[];if(u)e=u.x,i=u.y,r=(c-e)/Math.max(Math.abs(c-e),1),s=(p-i)/Math.max(Math.abs(p-i),1),0!==r&&0!==s?(d.isWalkableAt(c,p+s)&&f.push([c,p+s]),d.isWalkableAt(c+r,p)&&f.push([c+r,p]),(d.isWalkableAt(c,p+s)||d.isWalkableAt(c+r,p))&&f.push([c+r,p+s]),!d.isWalkableAt(c-r,p)&&d.isWalkableAt(c,p+s)&&f.push([c-r,p+s]),!d.isWalkableAt(c,p-s)&&d.isWalkableAt(c+r,p)&&f.push([c+r,p-s])):0===r?d.isWalkableAt(c,p+s)&&(f.push([c,p+s]),d.isWalkableAt(c+1,p)||f.push([c+1,p+s]),d.isWalkableAt(c-1,p)||f.push([c-1,p+s])):d.isWalkableAt(c+r,p)&&(f.push([c+r,p]),d.isWalkableAt(c,p+1)||f.push([c+r,p+1]),d.isWalkableAt(c,p-1)||f.push([c+r,p-1]));else for(a=d.getNeighbors(t,o.IfAtMostOneObstacle),h=0,l=a.length;h<l;++h)n=a[h],f.push([n.x,n.y]);return f},t.exports=r},function(t,e,i){t.exports=i.p+"assets/5fbd3862ae5c5b4eff40d8a642ae2779.png"}]);